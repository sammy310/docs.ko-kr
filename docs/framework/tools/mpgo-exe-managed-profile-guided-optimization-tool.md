---
title: Mpgo.exe(관리되는 프로필 기반 최적화 도구)
description: 관리되는 프로필 기반 최적화 도구인 Mpgo.exe를 사용합니다. 이 도구를 사용하여 네이티브 이미지 생성기(Ngen.exe)에서 만든 네이티브 이미지 어셈블리를 최적화합니다.
ms.date: 03/30/2017
helpviewer_keywords:
- Mpgo.exe
- training scenarios, generating profiles with
- Managed Profile Guided Optimization Tool
- Ngen.exe
- Ngen.exe, profilers and native images
ms.assetid: f6976502-a000-4fbe-aaf5-a7aab9ce4ec2
ms.openlocfilehash: 050822d12ef4e0a7dfa752e4789f9861c4894cfa
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2021
ms.locfileid: "102259384"
---
# <a name="mpgoexe-managed-profile-guided-optimization-tool"></a><span data-ttu-id="5895e-104">Mpgo.exe(관리되는 프로필 기반 최적화 도구)</span><span class="sxs-lookup"><span data-stu-id="5895e-104">Mpgo.exe (Managed Profile Guided Optimization Tool)</span></span>

<span data-ttu-id="5895e-105">관리되는 프로필 기반 최적화 도구(Mpgo.exe)는 공통 최종 사용자 시나리오를 사용하여 [네이티브 이미지 생성기(Ngen.exe)](ngen-exe-native-image-generator.md)로 만들어지는 네이티브 이미지 어셈블리를 최적화하는 명령줄 도구입니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-105">The Managed Profile Guided Optimization Tool (Mpgo.exe) is a command-line tool that uses common end-user scenarios to optimize the native image assemblies that are created by the [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md).</span></span> <span data-ttu-id="5895e-106">이 도구를 사용하면 프로필 데이터를 생성하는 교육 시나리오를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-106">This tool enables you to run training scenarios that generate profile data.</span></span> <span data-ttu-id="5895e-107">[네이티브 이미지 생성기(Ngen.exe)](ngen-exe-native-image-generator.md)는 이 데이터를 사용하여 생성된 네이티브 이미지 애플리케이션 어셈블리를 최적화합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-107">The [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) uses this data to optimize its generated native image application assemblies.</span></span> <span data-ttu-id="5895e-108">교육 시나리오는 애플리케이션의 정상적 용도에 대한 평가 실행입니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-108">A training scenario is a trial run of an expected use of your application.</span></span> <span data-ttu-id="5895e-109">Mpgo.exe는 Visual Studio Ultimate 2012 이상 버전에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-109">Mpgo.exe is available in Visual Studio Ultimate 2012 and later versions.</span></span> <span data-ttu-id="5895e-110">Visual Studio 2013부터 Mpgo.exe를 사용하여 Windows 8.x 스토어 앱을 최적화할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-110">Starting with Visual Studio 2013, you can also use Mpgo.exe to optimize Windows 8.x Store apps.</span></span>

<span data-ttu-id="5895e-111">프로필 기반 최적화는 교육 시나리오에서 데이터를 수집하고 네이티브 이미지의 레이아웃을 최적화하는 데 사용하여 애플리케이션 시작 시간, 메모리 사용률(작업 집합 크기), 처리량을 개선합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-111">Profile-guided optimization improves application startup time, memory utilization (working set size), and throughput by gathering data from training scenarios and using it to optimize the layout of native images.</span></span>

<span data-ttu-id="5895e-112">중간 언어(IL) 어셈블리에 대한 시작 시간 및 작업 집합에서 성능 문제가 발생하면 먼저 Ngen.exe를 사용하여 JIT(Just-In-Time) 컴파일 비용을 제거하고 코드 공유를 지원하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-112">When you encounter performance issues with startup time and working set size for Intermediate Language (IL) assemblies, we recommend that you first use Ngen.exe to eliminate just-in-time (JIT) compilation costs and to facilitate code sharing.</span></span> <span data-ttu-id="5895e-113">추가 개선이 필요한 경우 Mpgo.exe를 사용하여 애플리케이션을 더 최적화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-113">If you need additional improvements, you can then use Mpgo.exe to further optimize your application.</span></span> <span data-ttu-id="5895e-114">최적화되지 않은 네이티브 이미지 어셈블리의 성능 데이터를 성능 향상을 평가하는 기준선으로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-114">You can use the performance data from the un-optimized native image assemblies as a baseline to evaluate the performance gains.</span></span> <span data-ttu-id="5895e-115">Mpgo.exe를 사용하면 콜드 시작 시간이 단축되고 작업 집합 크기가 작아질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-115">Using Mpgo.exe may result in faster cold startup times and a smaller working set size.</span></span> <span data-ttu-id="5895e-116">Mpgo.exe는 Ngen.exe가 정보 최적화 네이티브 이미지 어셈블리를 생성하는 데 사용하는 정보를 IL 어셈블리에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-116">Mpgo.exe adds information to IL assemblies that Ngen.exe uses to create optimized native image assemblies.</span></span> <span data-ttu-id="5895e-117">자세한 내용은 .NET 블로그의 [데스크톱 애플리케이션의 시작 성능 개선](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) 항목을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5895e-117">For more information, see the entry [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) in the .NET blog.</span></span>

<span data-ttu-id="5895e-118">이 도구는 자동으로 Visual Studio와 함께 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-118">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="5895e-119">도구를 실행하려면 관리자 자격 증명과 함께 [개발자 명령줄 셸](/visualstudio/ide/reference/command-prompt-powershell)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-119">To run the tool, use a [developer command-line shell](/visualstudio/ide/reference/command-prompt-powershell) with administrator credentials.</span></span>

<span data-ttu-id="5895e-120">명령 프롬프트에서 다음 명령을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-120">Enter the following command at the command prompt:</span></span>

<span data-ttu-id="5895e-121">데스크톱 응용 프로그램:</span><span class="sxs-lookup"><span data-stu-id="5895e-121">For desktop apps:</span></span>

```console
mpgo –Scenario <command> [-Import <directory>] –AssemblyList <assembly1>  <assembly2> ... -OutDir <directory> [options]
```

<span data-ttu-id="5895e-122">Windows 8.x 스토어 앱:</span><span class="sxs-lookup"><span data-stu-id="5895e-122">For Windows 8.x Store apps:</span></span>

```console
mpgo –Scenario <packageName> -AppID <appId> -Timeout <seconds>
```

## <a name="parameters"></a><span data-ttu-id="5895e-123">매개 변수</span><span class="sxs-lookup"><span data-stu-id="5895e-123">Parameters</span></span>

 <span data-ttu-id="5895e-124">Mpgo.exe에 대한 모든 인수는 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-124">All arguments to Mpgo.exe are case-insensitive.</span></span> <span data-ttu-id="5895e-125">명령에 대시가 접두사로 붙습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-125">Commands are prefixed with a dash.</span></span>

> [!NOTE]
> <span data-ttu-id="5895e-126">`–Scenario` 또는 `–Import`를 필수 명령으로 사용할 수 있지만 둘 다 사용할 수는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-126">You can use either `–Scenario` or `–Import` as a required command, but not both.</span></span> <span data-ttu-id="5895e-127">`–Reset` 옵션을 지정하는 경우 필수 매개 변수는 사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-127">None of the required parameters are used if you specify the `–Reset` option.</span></span>

|<span data-ttu-id="5895e-128">필수적 매개 변수</span><span class="sxs-lookup"><span data-stu-id="5895e-128">Required parameter</span></span>|<span data-ttu-id="5895e-129">설명</span><span class="sxs-lookup"><span data-stu-id="5895e-129">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="5895e-130">`-Scenario` \<*command*></span><span class="sxs-lookup"><span data-stu-id="5895e-130">`-Scenario` \<*command*></span></span><br /><br /> <span data-ttu-id="5895e-131">또는</span><span class="sxs-lookup"><span data-stu-id="5895e-131">—or—</span></span><br /><br /> <span data-ttu-id="5895e-132">`-Scenario` \<*packageName*></span><span class="sxs-lookup"><span data-stu-id="5895e-132">`-Scenario` \<*packageName*></span></span><br /><br /> <span data-ttu-id="5895e-133">또는</span><span class="sxs-lookup"><span data-stu-id="5895e-133">-or-</span></span><br /><br /> <span data-ttu-id="5895e-134">`-Import` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="5895e-134">`-Import` \<*directory*></span></span>|<span data-ttu-id="5895e-135">데스크톱 앱의 경우 `–Scenario`를 사용하여 명령줄 인수 등의 최적화할 애플리케이션을 실행할 명령을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-135">For desktop apps, use `–Scenario` to specify the command to run the application you want to optimize, including any command-line arguments.</span></span> <span data-ttu-id="5895e-136">공백이 포함된 경로를 지정하는 경우 *command* 에 세 개의 큰따옴표를 사용합니다(예: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`).</span><span class="sxs-lookup"><span data-stu-id="5895e-136">Use three sets of double quotation marks around *command* if it specifies a path that includes spaces; for example: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span></span> <span data-ttu-id="5895e-137">*command* 에 공백이 포함되어 있는 경우 큰따옴표를 사용하면 제대로 작동하지 않으므로 큰따옴표를 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="5895e-137">Do not use double quotation marks; they will not work correctly if *command* includes spaces.</span></span><br /><br /> <span data-ttu-id="5895e-138">또는</span><span class="sxs-lookup"><span data-stu-id="5895e-138">-or-</span></span><br /><br /> <span data-ttu-id="5895e-139">Windows 8.x 스토어 앱의 경우 `–Scenario`을(를) 사용하여 프로필 정보를 생성할 패키지를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-139">For Windows 8.x Store apps, use `–Scenario` to specify the package that you want to generate profile information for.</span></span> <span data-ttu-id="5895e-140">전체 패키지 이름 대신 패키지의 표시 이름 또는 패키지 제품군 이름을 지정하는 경우, Mpgo.exe는 일치 항목이 하나뿐이면 사용자가 입력한 이름과 일치하는 패키지를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-140">If you specify the package display name or the package family name instead of the full package name, Mpgo.exe will select the package that matches the name you provided if there is only one match.</span></span> <span data-ttu-id="5895e-141">여러 패키지가 지정된 이름과 일치하는 경우, Mpgo.exe는 패키지를 선택하라는 메시지를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-141">If multiple packages match the specified name, Mpgo.exe will prompt you to choose a package.</span></span><br /><br /> <span data-ttu-id="5895e-142">또는</span><span class="sxs-lookup"><span data-stu-id="5895e-142">—or—</span></span><br /><br /> <span data-ttu-id="5895e-143">`-Import`를 사용하여 이전에 최적화된 어셈블리의 최적화 데이터가 `-AssemblyList`에서 어셈블리를 최적화하는 데 사용해야 함을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-143">Use `-Import` to specify that optimization data from previously optimized assemblies should be used to optimize the assemblies in `-AssemblyList`.</span></span> <span data-ttu-id="5895e-144">*directory* 는 이전에 최적화된 파일이 들어있는 디렉터리를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-144">*directory* specifies the directory that contains the previously optimized files.</span></span> <span data-ttu-id="5895e-145">`–AssemblyList` 또는 `–AssemblyListFile`에서 지정된 어셈블리는 가져온 파일의 데이터를 사용하여 최적화할 어셈블리의 새 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-145">The assemblies specified in `–AssemblyList` or `–AssemblyListFile` are the new versions of the assemblies to be optimized using the data from the imported files.</span></span> <span data-ttu-id="5895e-146">이전 어셈블리 버전의 최적화 데이터를 사용하면 시나리오를 다시 실행하지 않고도 새 버전의 어셈블리를 최적화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-146">Using optimization data from older version of assemblies enables you to optimize newer versions of assemblies without re-running the scenario.</span></span>  <span data-ttu-id="5895e-147">그러나 가져온 어셈블리와 대상 어셈블리가 현저히 다른 코드를 포함하는 경우, 최적화 데이터의 효율성이 저하됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-147">However, if the imported and target assemblies include significantly different code, the optimization data will be ineffective.</span></span> <span data-ttu-id="5895e-148">`–AssemblyList` 또는 `–AssemblyListFile`에 지정된 어셈블리 이름은 `–Import`*directory* 로 지정된 디렉터리에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-148">The assembly names specified in `–AssemblyList` or `–AssemblyListFile` must be present in the directory specified by `–Import`*directory*.</span></span> <span data-ttu-id="5895e-149">공백이 포함된 경로를 지정하는 경우 *directory* 를 세 개의 큰따옴표로 묶습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-149">Use three sets of double quotation marks around *directory* if it specifies a path that includes spaces.</span></span><br /><br /> <span data-ttu-id="5895e-150">`–Scenario` 또는 `–Import` 매개 변수를 지정해야 하지만 둘 다 지정할 수는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-150">You must specify either `–Scenario` or `–Import`, but not both parameters.</span></span>|
|<span data-ttu-id="5895e-151">`-OutDir` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="5895e-151">`-OutDir` \<*directory*></span></span>|<span data-ttu-id="5895e-152">최적화된 어셈블리를 저장할 디렉터리</span><span class="sxs-lookup"><span data-stu-id="5895e-152">The directory in which to place the optimized assemblies.</span></span> <span data-ttu-id="5895e-153">출력 디렉터리 폴더에 어셈블리가 이미 있으면, 새 복사본이 생성되고 이름에 인덱스 번호가 추가됩니다(예: *assemblyname*-1.exe).</span><span class="sxs-lookup"><span data-stu-id="5895e-153">If an assembly already exists in the output directory folder, a new copy is created and an index number is appended to its name; for example: *assemblyname*-1.exe.</span></span> <span data-ttu-id="5895e-154">공백이 포함된 경로를 지정하는 경우 *directory* 를 큰따옴표로 묶습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-154">Use double quotation marks around *directory* if it specifies a path that contains spaces.</span></span>|
|<span data-ttu-id="5895e-155">`-AssemblyList` \<*assembly1 assembly2 ...*></span><span class="sxs-lookup"><span data-stu-id="5895e-155">`-AssemblyList` \<*assembly1 assembly2 ...*></span></span><br /><br /> <span data-ttu-id="5895e-156">또는</span><span class="sxs-lookup"><span data-stu-id="5895e-156">—or—</span></span><br /><br /> <span data-ttu-id="5895e-157">`-AssemblyListFile` \<*file*></span><span class="sxs-lookup"><span data-stu-id="5895e-157">`-AssemblyListFile` \<*file*></span></span>|<span data-ttu-id="5895e-158">공백으로 분리된 프로필 정보를 수집할 어셈블리(.exe 및 .dll 파일 등)의 목록</span><span class="sxs-lookup"><span data-stu-id="5895e-158">A list of assemblies (including .exe and .dll files), separated by spaces, that you want collect profile information about.</span></span> <span data-ttu-id="5895e-159">`C:\Dir\*.dll` 또는 `*.dll`을 지정하여 지정된 또는 현재 작업 디렉터리에 있는 모든 어셈블리를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-159">You can specify `C:\Dir\*.dll` or `*.dll` to select all the assemblies in the designated or current working directory.</span></span> <span data-ttu-id="5895e-160">자세한 내용은 설명 부분을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5895e-160">See the Remarks section for more information.</span></span><br /><br /> <span data-ttu-id="5895e-161">또는</span><span class="sxs-lookup"><span data-stu-id="5895e-161">—or—</span></span><br /><br /> <span data-ttu-id="5895e-162">줄당 하나의 어셈블리로 나열된 어셈블리에 대한 프로필 정보를 수집한 어셈블리 목록이 포함된 텍스트 파일</span><span class="sxs-lookup"><span data-stu-id="5895e-162">A text file that contains the list of assemblies you want to collect profile information about, listed one assembly per line.</span></span> <span data-ttu-id="5895e-163">어셈블리 이름이 하이픈(-)으로 시작되면 어셈블리 파일 목록을 사용하거나 어셈블리의 이름을 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-163">If an assembly name begins with a hyphen (-), use an assembly file list or rename the assembly.</span></span>|
|<span data-ttu-id="5895e-164">`-AppID` \<*appId*></span><span class="sxs-lookup"><span data-stu-id="5895e-164">`-AppID` \<*appId*></span></span>|<span data-ttu-id="5895e-165">지정된 패키지에 있는 애플리케이션의 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-165">The ID of the application in the specified package.</span></span> <span data-ttu-id="5895e-166">와일드카드(\*)를 사용하는 경우, Mpgo.exe는 패키지에서 AppID를 열거하려고 하고, 실패하는 경우 \<*package_family_name*>!App으로 대체합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-166">If you use the wildcard (\*), Mpgo.exe will try to enumerate the AppIDs in the package and will fall back to \<*package_family_name*>!App if it fails.</span></span> <span data-ttu-id="5895e-167">앞에 느낌표(!)가 있는 문자열을 지정하는 경우, Mpgo.exe는 제공되는 인수를 사용하여 패키지 제품군 이름을 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-167">If you specify a string that is prefixed by an exclamation point (!), Mpgo.exe will concatenate the package family name with the argument provided.</span></span>|
|<span data-ttu-id="5895e-168">`-Timeout` \<*seconds*></span><span class="sxs-lookup"><span data-stu-id="5895e-168">`-Timeout` \<*seconds*></span></span>|<span data-ttu-id="5895e-169">앱이 종료되기 전에 Windows 8.x 스토어 앱을 실행할 수 있는 시간</span><span class="sxs-lookup"><span data-stu-id="5895e-169">The amount of time to allow the Windows 8.x Store app to run before the app exits.</span></span>|

|<span data-ttu-id="5895e-170">선택적 매개 변수</span><span class="sxs-lookup"><span data-stu-id="5895e-170">Optional parameter</span></span>|<span data-ttu-id="5895e-171">설명</span><span class="sxs-lookup"><span data-stu-id="5895e-171">Description</span></span>|
|------------------------|-----------------|
|`-64bit`|<span data-ttu-id="5895e-172">64비트 시스템의 어셈블리를 계측합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-172">Instruments the assemblies for 64-bit systems.</span></span>  <span data-ttu-id="5895e-173">64비트로 자체 어셈블리를 선언하더라도 64비트 어셈블리에 대해 이 매개 변수를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-173">You must specify this parameter for 64-bit assemblies, even if your assembly declares itself as 64 bit.</span></span>|
|<span data-ttu-id="5895e-174">`-ExeConfig` \<*filename*></span><span class="sxs-lookup"><span data-stu-id="5895e-174">`-ExeConfig` \<*filename*></span></span>|<span data-ttu-id="5895e-175">시나리오가 버전 및 로더 정보를 제공하기 위해 사용하는 구성 파일을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-175">Specifies the configuration file that your scenario uses to provide version and loader information.</span></span>|
|`-f`|<span data-ttu-id="5895e-176">서명을 했더라도 바이너리 어셈블리에 프로필 데이터를 강제로 포함되게 합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-176">Forces the inclusion of the profile data in a binary assembly, even if it's signed.</span></span>  <span data-ttu-id="5895e-177">어셈블리에 서명했더라도 다시 서명해야 합니다. 그렇지 않으면 어셈블리가 로드 및 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-177">If the assembly is signed, it must be re-signed; otherwise, the assembly will fail to load and run.</span></span>|
|`-Reset`|<span data-ttu-id="5895e-178">환경을 다시 설정하여 종료된 프로파일링 세션이 어셈블리에 영향을 주지 않음을 확인한 다음 끝냅니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-178">Resets the environment to make certain that an aborted profiling session doesn't affect your assemblies, and then quits.</span></span> <span data-ttu-id="5895e-179">기본적으로 환경은 프로파일링 세션 전후 다시 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-179">The environment is reset by default before and after a profiling session.</span></span>|
|<span data-ttu-id="5895e-180">`-Timeout` \<*time in seconds*></span><span class="sxs-lookup"><span data-stu-id="5895e-180">`-Timeout` \<*time in seconds*></span></span>|<span data-ttu-id="5895e-181">프로파일링 지속 시간을 초 단위로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-181">Specifies the profiling duration in seconds.</span></span> <span data-ttu-id="5895e-182">GUI 애플리케이션에는 관찰한 시작 시간보다 조금 더 높은 값을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-182">Use a value that is slightly more than your observed startup times for GUI applications.</span></span> <span data-ttu-id="5895e-183">시간 제한 기간이 끝나면 애플리케이션이 계속 실행되어도 프로필 데이터가 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-183">At the end of the time-out period, the profile data is recorded although the application continues to run.</span></span> <span data-ttu-id="5895e-184">이 옵션을 설정하지 않으면 애플리케이션 종료까지 프로파일링이 계속되며, 애플리케이션이 종료하는 시점에 데이터가 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-184">If you don't set this option, profiling will continue until application shutdown, at which time the data will be recorded.</span></span>|
|`-LeaveNativeImages`|<span data-ttu-id="5895e-185">시나리오를 실행한 후에 계측된 네이티브 이미지가 삭제되지 않도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-185">Specifies that the instrumented native images shouldn't be removed after running the scenario.</span></span> <span data-ttu-id="5895e-186">이 옵션은 실행 중인 시나리오에 지정한 애플리케이션을 가져올 때 주로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-186">This option is primarily used when you're getting the application that you specified for the scenario running.</span></span> <span data-ttu-id="5895e-187">이렇게 하면 Mpgo.exe의 후속 실행에 대한 네이티브 이미지가 다시 작성되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-187">It will prevent the recreation of native images for subsequent runs of Mpgo.exe.</span></span> <span data-ttu-id="5895e-188">애플리케이션의 실행을 종료하면 이 옵션을 지정하는 경우 캐시에 고아가 된 원시 이미지가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-188">When you have finished running your application, there may be orphaned native images in the cache if you specify this option.</span></span> <span data-ttu-id="5895e-189">이 경우 Mpgo.exe를 동일한 시나리오 및 어셈블리 목록을 사용하여 실행하고 `–RemoveNativeImages` 매개 변수를 사용하여 원시 이미지를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-189">In this case, run Mpgo.exe with the same scenario and assembly list and use the `–RemoveNativeImages` parameter to remove these native images.</span></span>|
|`-RemoveNativeImages`|<span data-ttu-id="5895e-190">`–LeaveNativeImages`가 지정된 실행에서 정리합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-190">Cleans up from a run where `–LeaveNativeImages` was specified.</span></span> <span data-ttu-id="5895e-191">`-RemoveNativeImages`를 지정하는 경우, Mpgo.exe는 `-64bit` 및 `–AssemblyList`를 제외한 모든 인수를 무시하고 계측된 모든 네이티브 이미지를 삭제한 후 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-191">If you specify `-RemoveNativeImages`, Mpgo.exe ignores any arguments except `-64bit` and `–AssemblyList`, and exits after removing all instrumented native images.</span></span>|

## <a name="remarks"></a><span data-ttu-id="5895e-192">설명</span><span class="sxs-lookup"><span data-stu-id="5895e-192">Remarks</span></span>

 <span data-ttu-id="5895e-193">명령줄에서 `–AssemblyList` 및 `- AssemblyListFile`을 여러 번 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-193">You can use both `–AssemblyList` and `- AssemblyListFile` multiple times on the command line.</span></span>

 <span data-ttu-id="5895e-194">어셈블리를 지정할 때 전체 경로 이름을 지정하지 않으면 Mpgo.exe는 현재 디렉터리에서 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-194">If you do not specify full path names when specifying assemblies, Mpgo.exe looks in the current directory.</span></span> <span data-ttu-id="5895e-195">잘못된 경로를 지정하는 경우 Mpgo.exe는 오류 메시지를 표시하지만 다른 어셈블리에 대한 데이터는 계속 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-195">If you specify an incorrect path, Mpgo.exe displays an error message but continues to generate data for other assemblies.</span></span> <span data-ttu-id="5895e-196">교육 시나리오 중 로드되지 않은 어셈블리를 지정하는 경우 해당 어셈블리에 대해 교육 데이터가 생성되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-196">If you specify an assembly that is not loaded during the training scenario, no training data is generated for that assembly.</span></span>

 <span data-ttu-id="5895e-197">목록의 어셈블리가 전역 어셈블리 캐시에 있는 경우 프로필 정보를 포함하도록 업데이트되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-197">If an assembly in the list is in the global assembly cache, it will not be updated to contain the profile information.</span></span>  <span data-ttu-id="5895e-198">전역 어셈블리 캐시에서 제거하여 프로필 정보를 수집합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-198">Remove it from the global assembly cache to collect profile information.</span></span>

 <span data-ttu-id="5895e-199">미리 컴파일된 네이티브 이미지의 장점은 일반적으로 런타임에서 중요한 JIT 컴파일을 제거하는 경우에만 확인되기 때문에, Ngen.exe 및 Mpgo.exe는 대형의 관리된 애플리케이션에만 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-199">The use of Ngen.exe and Mpgo.exe is recommended only for large managed applications, because the benefit of precompiled native images is typically seen only when it eliminates significant JIT compilation at run time.</span></span> <span data-ttu-id="5895e-200">작업 집합을 많이 사용하지 않는 "Hello World" 스타일의 애플리케이션에서는 Mpgo.exe을 실행해도 어떠한 이점도 없을 것이고, Mpgo.exe는 프로필 데이터 수집에도 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-200">Running Mpgo.exe on "Hello World" style applications that aren’t working-set intensive will not provide any benefits, and Mpgo.exe may even fail to gather profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="5895e-201">Ngen.exe 및 Mpgo.exe는 ASP.NET 애플리케이션 및 WCF(Windows Communication Foundation) 서비스에 권장되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-201">Ngen.exe and Mpgo.exe are not recommended for ASP.NET applications and Windows Communication Foundation (WCF) services.</span></span>

## <a name="to-use-mpgoexe"></a><span data-ttu-id="5895e-202">Mpgo.exe를 사용하려면</span><span class="sxs-lookup"><span data-stu-id="5895e-202">To Use Mpgo.exe</span></span>

1. <span data-ttu-id="5895e-203">Visual Studio Ultimate 2012와 애플리케이션이 설치된 컴퓨터를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-203">Use a computer that has the Visual Studio Ultimate 2012 and your application installed.</span></span>

2. <span data-ttu-id="5895e-204">Mpgo.exe를 관리자 권한으로 필요한 매개 변수를 사용하여 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-204">Run Mpgo.exe as an administrator with the necessary parameters.</span></span>  <span data-ttu-id="5895e-205">샘플 명령은 다음 단원을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="5895e-205">See the next section for sample commands.</span></span>

     <span data-ttu-id="5895e-206">최적화된 IL(중간 언어) 어셈블리는 `–OutDir` 매개 변수로 지정된 폴더(이 예제에서는 `C:\Optimized` 폴더)에 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-206">The optimized intermediate language (IL) assemblies are created in the folder specified by the `–OutDir` parameter (in the examples, this is the `C:\Optimized` folder).</span></span>

3. <span data-ttu-id="5895e-207">Ngen.exe에 사용한 IL 어셈블리를 `–OutDir`로 지정된 디렉터리의 프로필 정보가 포함된 새로운 IL 어셈블리로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-207">Replace the IL assemblies you used for Ngen.exe  with the new IL assemblies that contain the profile information from the directory specified by `–OutDir`.</span></span>

4. <span data-ttu-id="5895e-208">애플리케이션을 설정하면(Mpgo.exe에서 제공하는 이미지를 사용) 최적화된 원시 이미지가 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-208">The application setup (using the images provided by Mpgo.exe) will install optimized native images.</span></span>

## <a name="suggested-workflow"></a><span data-ttu-id="5895e-209">제안된 워크플로</span><span class="sxs-lookup"><span data-stu-id="5895e-209">Suggested Workflow</span></span>

1. <span data-ttu-id="5895e-210">Mpgo.exe를 `–Scenario` 매개 변수와 함께 사용하여 최적화된 IL 어셈블리 집합을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-210">Create a set of optimized IL assemblies by using Mpgo.exe with the `–Scenario` parameter.</span></span>

2. <span data-ttu-id="5895e-211">소스 제어에 최적화된 IL 어셈블리를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-211">Check the optimized IL assemblies into source control.</span></span>

3. <span data-ttu-id="5895e-212">빌드 프로세스에서, 최적화된 IL 이미지를 생성하여 Ngen.exe에 전달하기 위한 빌드 후 단계로 `–Import` 매개 변수와 함께 Mpgo.exe를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-212">In the build process, call Mpgo.exe with the `–Import` parameter as a post-build step to generate optimized IL images to pass to Ngen.exe.</span></span>

 <span data-ttu-id="5895e-213">이렇게 하면 모든 어셈블리의 데이터가 최적화됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-213">This process ensures that all assemblies have optimization data.</span></span> <span data-ttu-id="5895e-214">최적화된 어셈블리 업데이트(1단계와 2단계)를 더 자주 체크 인하는 경우, 성능 수치의 일관성이 제품 개발 과정 전체에 걸쳐 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-214">If you check in updated optimized assemblies (steps 1 and 2) more frequently, the performance numbers will be more consistent throughout product development.</span></span>

## <a name="using-mpgoexe-from-visual-studio"></a><span data-ttu-id="5895e-215">Visual Studio에서 Mpgo.exe 사용</span><span class="sxs-lookup"><span data-stu-id="5895e-215">Using Mpgo.exe from Visual Studio</span></span>

 <span data-ttu-id="5895e-216">Visual Studio의 Mpgo.exe를 다음과 같은 제한에 따라 실행할 수 있습니다([방법: 빌드 이벤트 지정(C#)](/visualstudio/ide/how-to-specify-build-events-csharp) 참조).</span><span class="sxs-lookup"><span data-stu-id="5895e-216">You can run Mpgo.exe from Visual Studio (see the article [How to: Specify Build Events (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) with the following restrictions:</span></span>

- <span data-ttu-id="5895e-217">Visual Studio 매크로도 기본적으로 후행 슬래시 기호를 사용하기 때문에 따옴표로 묶은 경로를 후행 슬래시 기호와 함께 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-217">You cannot use quoted paths with trailing slash marks, because Visual Studio macros also use trailing slash marks by default.</span></span> <span data-ttu-id="5895e-218">예를 들어 `–OutDir "C:\Output Folder\"`는 올바르지 않습니다. 이 제한을 해결하려면 후행 슬래시를 이스케이프할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-218">(For example, `–OutDir "C:\Output Folder\"` is invalid.) To work around this restriction, you can escape the trailing slash.</span></span> <span data-ttu-id="5895e-219">예를 들어 `-OutDir "$(OutDir)\"`을 대신 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-219">(For example, use `-OutDir "$(OutDir)\"` instead.)</span></span>

- <span data-ttu-id="5895e-220">기본적으로 Mpgo.exe는 Visual Studio 빌드 경로에 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-220">By default, Mpgo.exe is not on the Visual Studio build path.</span></span> <span data-ttu-id="5895e-221">Visual Studio에 경로를 추가하거나 또는 Mpgo 명령줄에서 전체 경로를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-221">You must either add the path to Visual Studio or specify the full path on the Mpgo command line.</span></span> <span data-ttu-id="5895e-222">Visual Studio의 빌드 후 이벤트에서 `–Scenario` 또는 `–Import` 매개 변수를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-222">You can use either the `–Scenario` or the `–Import` parameter in the post-build event in Visual Studio.</span></span> <span data-ttu-id="5895e-223">그러나 일반적인 프로세스는 Visual Studio용 개발자 명령 프롬프트에서 `–Scenario`를 한 번 사용한 후 `–Import`를 사용하여 각 빌드 후 최적화된 어셈블리를 업데이트하는 것입니다(예: `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`).</span><span class="sxs-lookup"><span data-stu-id="5895e-223">However, the typical process is to use `–Scenario` one time from a Developer Command Prompt for Visual Studio, and then use `–Import` to update the optimized assemblies after each build; for example:  `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span></span>

<a name="samples"></a>

## <a name="examples"></a><span data-ttu-id="5895e-224">예</span><span class="sxs-lookup"><span data-stu-id="5895e-224">Examples</span></span>

 <span data-ttu-id="5895e-225">Visual Studio용 개발자 명령 프롬프트의 다음 Mpgo.exe 명령은 세금 애플리케이션을 최적화합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-225">The following Mpgo.exe command from a Developer Command Prompt for Visual Studio optimizes a tax application:</span></span>

```console
mpgo –scenario "C:\MyApp\MyTax.exe /params par" –AssemblyList Mytax.dll MyTaxUtil2011.dll –OutDir C:\Optimized –TimeOut 15
```

 <span data-ttu-id="5895e-226">다음 Mpgo.exe 명령은 사운드 애플리케이션을 최적화합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-226">The following Mpgo.exe command optimizes a sound application:</span></span>

```console
mpgo –scenario "C:\MyApp\wav2wma.exe –input song1.wav –output song1.wma" –AssemblyList transcode.dll –OutDir C:\Optimized –TimeOut 15
```

 <span data-ttu-id="5895e-227">다음 Mpgo.exe 명령은 이전에 최적화된 어셈블리의 데이터를 사용하여 새 버전의 어셈블리를 최적화합니다.</span><span class="sxs-lookup"><span data-stu-id="5895e-227">The following Mpgo.exe command uses data from previously optimized assemblies to optimize newer versions of the assemblies:</span></span>

```console
mpgo.exe -import "C:\Optimized" -assemblylist "C:\MyApp\MyTax.dll" "C:\MyApp\MyTaxUtil2011.dll" -outdir C:\ReOptimized
```

## <a name="see-also"></a><span data-ttu-id="5895e-228">참조</span><span class="sxs-lookup"><span data-stu-id="5895e-228">See also</span></span>

- [<span data-ttu-id="5895e-229">Ngen.exe(네이티브 이미지 생성기)</span><span class="sxs-lookup"><span data-stu-id="5895e-229">Ngen.exe (Native Image Generator)</span></span>](ngen-exe-native-image-generator.md)
- [<span data-ttu-id="5895e-230">개발자 명령줄 셸</span><span class="sxs-lookup"><span data-stu-id="5895e-230">Developer command-line shells</span></span>](/visualstudio/ide/reference/command-prompt-powershell)
- [<span data-ttu-id="5895e-231">데스크톱 애플리케이션의 시작 성능 개선</span><span class="sxs-lookup"><span data-stu-id="5895e-231">Improving Launch Performance for your Desktop Applications</span></span>](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/)
- [<span data-ttu-id="5895e-232">.NET Framework 4.5의 성능 개선 개요</span><span class="sxs-lookup"><span data-stu-id="5895e-232">An Overview of Performance Improvements in .NET Framework 4.5</span></span>](/archive/msdn-magazine/2012/april/clr-an-overview-of-performance-improvements-in-net-4-5)

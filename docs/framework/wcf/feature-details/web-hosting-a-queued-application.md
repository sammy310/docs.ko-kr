---
title: 대기 중인 애플리케이션 웹 호스팅
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: c2b41ee1d0a82693760bc3e1b6144d2190153f24
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96249776"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="c9f05-102">대기 중인 애플리케이션 웹 호스팅</span><span class="sxs-lookup"><span data-stu-id="c9f05-102">Web Hosting a Queued Application</span></span>

<span data-ttu-id="c9f05-103">WAS (Windows Process Activation Service)는 Windows Communication Foundation (WCF) 서비스를 호스팅하는 응용 프로그램을 포함 하는 작업자 프로세스의 활성화 및 수명을 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="c9f05-104">WAS 프로세스 모델은 http에 대 한 종속성을 제거 하 여 HTTP 서버에 대 한 IIS 6.0 프로세스 모델을 일반화 합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-104">The WAS process model generalizes the IIS 6.0 process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="c9f05-105">이를 통해 WCF 서비스는 메시지 기반 활성화를 지원 하 고 지정 된 컴퓨터에서 다 수의 응용 프로그램을 호스트 하는 기능을 제공 하는 호스팅 환경에서 msmq.formatname 등의 HTTP 및 HTTP가 아닌 프로토콜을 모두 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="c9f05-106">WAS에는 대기 중인 애플리케이션에 사용된 큐 중 하나에 하나 이상의 메시지가 있을 경우 해당 애플리케이션을 활성화하는 MSMQ(메시지 큐) 활성화 서비스가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="c9f05-107">MSMQ 활성화 서비스는 기본적으로 자동 시작되는 NT 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="c9f05-108">WAS 및 그 이점에 대 한 자세한 내용은 [Windows Process Activation Service에서 호스팅](hosting-in-windows-process-activation-service.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="c9f05-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="c9f05-109">MSMQ에 대 한 자세한 내용은 [큐 개요](queues-overview.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="c9f05-109">For more information about MSMQ, see [Queues Overview](queues-overview.md).</span></span>
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="c9f05-110">WAS의 큐 주소 지정</span><span class="sxs-lookup"><span data-stu-id="c9f05-110">Queue Addressing in WAS</span></span>  

 <span data-ttu-id="c9f05-111">WAS 애플리케이션에는 URI(Uniform Resource Identifier) 주소가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="c9f05-112">애플리케이션 주소는 기본 URI 접두사와 애플리케이션별 상대 주소(경로)로 이루어집니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="c9f05-113">이 두 부분은 함께 결합될 경우 애플리케이션의 외부 주소를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="c9f05-114">기본 URI 접두사는 사이트 바인딩에서 생성 되며 사이트의 모든 응용 프로그램에 사용 됩니다 (예: "net.pipe:/localhost", "msmq.formatname:/localhost" 또는 "net.tcp:/localhost").</span><span class="sxs-lookup"><span data-stu-id="c9f05-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="c9f05-115">응용 프로그램 주소는 응용 프로그램 관련 경로 조각 (예: "/Dcone")을 가져와서 기본 URI 접두사에 추가 하 여 전체 응용 프로그램 URI (예: "net.tcp:/Localhost/wchostone")에 도착 하는 방법으로 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="c9f05-116">MSMQ 활성화 서비스는 애플리케이션 URI를 사용하여 MSMQ 활성화 서비스가 메시지를 모니터링해야 하는 큐를 일치시킵니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="c9f05-117">MSMQ 활성화 서비스가 시작되면 수신하도록 구성된 컴퓨터의 모든 공개 큐 및 개인 큐를 열거하고 메시지를 모니터링합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="c9f05-118">10분 간격으로 MSMQ 활성화 서비스는 모니터링할 큐 목록을 새로 고칩니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="c9f05-119">메시지가 큐에 있으면 활성화 서비스가 큐 이름을 net.msmq 바인딩의 가장 긴 일치 애플리케이션 URI와 일치시키고 애플리케이션을 활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c9f05-120">활성화되는 애플리케이션은 큐 이름의 접두사와 일치해야 합니다(가장 긴 일치).</span><span class="sxs-lookup"><span data-stu-id="c9f05-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="c9f05-121">예를 들어 큐 이름은 msmqWebHost/orderProcessing/service.svc입니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="c9f05-122">Application 1에 가상 디렉터리 /msmqWebHost/orderProcessing이 있고 그 아래에 service.svc가 있으며 Application 2에 가상 디렉터리 /msmqWebHost가 있고 그 아래에 orderProcessing.svc가 있으면 Application 1이 활성화됩니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="c9f05-123">Application 1을 삭제하면 Application 2가 활성화됩니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c9f05-124">큐를 만들면 MSMQ 활성화 서비스에서 큐 목록을 새로 고칠 때까지, 즉 큐를 만든 시간부터 최대 10분 동안 해당 큐로 전송된 메시지가 애플리케이션을 활성화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="c9f05-125">활성화 서비스를 다시 시작하면 큐 목록도 새로 고쳐집니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="c9f05-126">개인 큐와 공개 큐가 주소 지정에 미치는 영향</span><span class="sxs-lookup"><span data-stu-id="c9f05-126">The Effect of Private and Public Queues on Addressing</span></span>  

 <span data-ttu-id="c9f05-127">MSMQ 활성화 서비스는 개인 큐 및 공개 큐 모니터링을 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="c9f05-128">따라서 동일한 이름의 공개 큐와 개인 큐를 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="c9f05-129">사용하면 웹에 호스트된 애플리케이션이 큐 중 하나에서 읽는 동안 활성화될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="c9f05-130">활성화에 대한 큐 구성</span><span class="sxs-lookup"><span data-stu-id="c9f05-130">Queue Configuration for Activation</span></span>  

 <span data-ttu-id="c9f05-131">MSMQ 활성화 서비스는 NETWORK SERVICE로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="c9f05-132">큐를 모니터링하여 애플리케이션을 활성화하는 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="c9f05-133">큐에서 애플리케이션을 활성화하려면 큐가 ACL(액세스 제어 목록)에서 메시지를 피킹할 NETWORK SERVICE 권한을 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="c9f05-134">포이즌 메시징</span><span class="sxs-lookup"><span data-stu-id="c9f05-134">Poison Messaging</span></span>  

 <span data-ttu-id="c9f05-135">WCF의 포이즌 메시지 처리는 채널에 의해 처리 되며, 메시지를 포이즌 하는 것을 감지할 뿐만 아니라 사용자 구성에 따라 처리를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="c9f05-136">따라서 큐에 하나의 메시지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="c9f05-137">웹에 호스트된 애플리케이션은 연속 시도를 중단하며 메시지가 다시 시도 큐로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="c9f05-138">다시 시도 주기 지연에 지정된 시점에서 다시 시도할 메시지가 다시 시도 큐에서 기본 큐로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="c9f05-139">그러나 이 경우 대기 중인 채널이 활성 상태여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="c9f05-140">WAS에서 애플리케이션을 재활용하는 경우 다른 메시지가 기본 큐에 도착하여 대기 중인 애플리케이션을 활성화할 때까지 메시지가 다시 시도 큐에 남아 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="c9f05-141">이 경우의 해결 방법은 수동으로 메시지를 다시 시도 큐에서 기본 큐로 이동하여 애플리케이션을 다시 활성화하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="c9f05-142">하위 큐 및 시스템 큐 경고</span><span class="sxs-lookup"><span data-stu-id="c9f05-142">Subqueue and System Queue Caveat</span></span>  

 <span data-ttu-id="c9f05-143">시스템 차원의 배달 못 한 큐 등의 시스템 큐나 포이즌 하위 큐 등의 하위 큐에 있는 메시지를 기반으로 WAS에 호스트된 애플리케이션을 활성화할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="c9f05-144">이 제품 버전의 제한 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="c9f05-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c9f05-145">참고 항목</span><span class="sxs-lookup"><span data-stu-id="c9f05-145">See also</span></span>

- [<span data-ttu-id="c9f05-146">포이즌 메시지 처리</span><span class="sxs-lookup"><span data-stu-id="c9f05-146">Poison Message Handling</span></span>](poison-message-handling.md)
- [<span data-ttu-id="c9f05-147">서비스 엔드포인트 및 큐 주소 지정</span><span class="sxs-lookup"><span data-stu-id="c9f05-147">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)

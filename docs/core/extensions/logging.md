---
title: .NET의 로깅
author: IEvangelist
description: Microsoft.Extensions.Logging NuGet 패키지에서 제공하는 로깅 프레임워크 사용법을 알아보세요.
ms.author: dapine
ms.date: 02/19/2021
ms.openlocfilehash: 834331b9e103138012bbe91586d0d5a7c08654ce
ms.sourcegitcommit: bdbf6472de867a0a11aaa5b9384a2506c24f27d2
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/05/2021
ms.locfileid: "102402169"
---
# <a name="logging-in-net"></a><span data-ttu-id="af33a-103">.NET의 로깅</span><span class="sxs-lookup"><span data-stu-id="af33a-103">Logging in .NET</span></span>

<span data-ttu-id="af33a-104">.NET는 다양한 기본 제공 및 타사 로깅 공급자에서 작동하는 로깅 API를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-104">.NET supports a logging API that works with a variety of built-in and third-party logging providers.</span></span> <span data-ttu-id="af33a-105">이 문서에서는 기본 제공 공급자를 이용하여 로깅 API를 사용하는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-105">This article shows how to use the logging API with built-in providers.</span></span> <span data-ttu-id="af33a-106">이 문서에 표시된 대부분의 코드 예제는 [제네릭 호스트](generic-host.md)를 사용하는 모든 .NET 앱에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-106">Most of the code examples shown in this article apply to any .NET app that uses the [Generic Host](generic-host.md).</span></span> <span data-ttu-id="af33a-107">제네릭 호스트를 사용하지 않는 앱의 경우 [비호스트 콘솔 앱](#non-host-console-app)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-107">For apps that don't use the Generic Host, see [Non-host console app](#non-host-console-app).</span></span>

## <a name="create-logs"></a><span data-ttu-id="af33a-108">로그 만들기</span><span class="sxs-lookup"><span data-stu-id="af33a-108">Create logs</span></span>

<span data-ttu-id="af33a-109">로그를 만들려면 [DI(종속성 주입)](dependency-injection.md)의 <xref:Microsoft.Extensions.Logging.ILogger%601> 개체를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-109">To create logs, use an <xref:Microsoft.Extensions.Logging.ILogger%601> object from [dependency injection (DI)](dependency-injection.md).</span></span>

<span data-ttu-id="af33a-110">다음 예제가 하는 일:</span><span class="sxs-lookup"><span data-stu-id="af33a-110">The following example:</span></span>

- <span data-ttu-id="af33a-111">형식이 `Worker`인 정규화된 이름의 로그 ‘범주’를 사용하는 `ILogger<Worker>` 로거를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-111">Creates a logger, `ILogger<Worker>`, which uses a log *category* of the fully qualified name of the type `Worker`.</span></span> <span data-ttu-id="af33a-112">로그 범주는 각 로그와 연결된 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-112">The log category is a string that is associated with each log.</span></span>
- <span data-ttu-id="af33a-113"><xref:Microsoft.Extensions.Logging.LoggerExtensions.LogInformation%2A>을 호출하여 `Information` 수준에 로그합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-113">Calls <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogInformation%2A> to log at the `Information` level.</span></span> <span data-ttu-id="af33a-114">로그 *수준* 은 기록된 이벤트의 심각도를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-114">The Log *level* indicates the severity of the logged event.</span></span>

:::code language="csharp" source="snippets/configuration/worker-service/Worker.cs" range="9-24" highlight="12":::

<span data-ttu-id="af33a-115">[수준](#log-level) 및 [범주](#log-category)는 이 문서의 뒷부분에 자세히 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-115">[Levels](#log-level) and [categories](#log-category) are explained in more detail later in this article.</span></span>

## <a name="configure-logging"></a><span data-ttu-id="af33a-116">로깅 구성</span><span class="sxs-lookup"><span data-stu-id="af33a-116">Configure logging</span></span>

<span data-ttu-id="af33a-117">로깅 구성은 일반적으로 *appsettings*.`{Environment}` *.json* 파일의 `Logging` 섹션에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-117">Logging configuration is commonly provided by the `Logging` section of *appsettings*.`{Environment}`*.json* files.</span></span> <span data-ttu-id="af33a-118">다음 *appsettings.Development.json* 파일은 .NET 작업자 서비스 템플릿으로 생성되었습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-118">The following *appsettings.Development.json* file is generated by the .NET Worker service templates:</span></span>

:::code language="json" source="snippets/configuration/worker-service/appsettings.Development.json":::

<span data-ttu-id="af33a-119">앞의 JSON에서:</span><span class="sxs-lookup"><span data-stu-id="af33a-119">In the preceding JSON:</span></span>

- <span data-ttu-id="af33a-120">`"Default"`, `"Microsoft"` 및 `"Microsoft.Hosting.Lifetime"` 범주가 지정되었습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-120">The `"Default"`, `"Microsoft"`, and `"Microsoft.Hosting.Lifetime"` categories are specified.</span></span>
- <span data-ttu-id="af33a-121">`"Microsoft"` 범주는 `"Microsoft"`로 시작하는 모든 범주에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-121">The `"Microsoft"` category applies to all categories that start with `"Microsoft"`.</span></span>
- <span data-ttu-id="af33a-122">`"Microsoft"` 범주는 로그 수준 `Warning` 이상에 로그됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-122">The `"Microsoft"` category logs at log level `Warning` and higher.</span></span>
- <span data-ttu-id="af33a-123">`"Microsoft.Hosting.Lifetime"` 범주는 `"Microsoft"` 범주보다 구체적이므로 `"Microsoft.Hosting.Lifetime"` 범주는 로그 수준 “정보” 이상에 로그됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-123">The `"Microsoft.Hosting.Lifetime"` category is more specific than the `"Microsoft"` category, so the `"Microsoft.Hosting.Lifetime"` category logs at log level "Information" and higher.</span></span>
- <span data-ttu-id="af33a-124">특정 로그 공급자를 지정하지 않았으므로 `LogLevel`은 [Windows EventLog](logging-providers.md#windows-eventlog)를 제외하고 사용하도록 설정한 모든 로깅 공급자에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-124">A specific log provider is not specified, so `LogLevel` applies to all the enabled logging providers except for the [Windows EventLog](logging-providers.md#windows-eventlog).</span></span>

<span data-ttu-id="af33a-125">`Logging` 속성은 <xref:Microsoft.Extensions.Logging.LogLevel> 및 로그 공급자 속성을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-125">The `Logging` property can have <xref:Microsoft.Extensions.Logging.LogLevel> and log provider properties.</span></span> <span data-ttu-id="af33a-126">`LogLevel` 속성은 선택한 범주에 대해 로그할 최소 [수준](#log-level)을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-126">The `LogLevel` specifies the minimum [level](#log-level) to log for selected categories.</span></span> <span data-ttu-id="af33a-127">위의 JSON에서는 `Information` 및 `Warning` 로그 수준을 지정했습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-127">In the preceding JSON, `Information` and `Warning` log levels are specified.</span></span> <span data-ttu-id="af33a-128">`LogLevel` 로그의 심각도를 나타내며 0에서 6 사이의 범위입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-128">`LogLevel` indicates the severity of the log and ranges from 0 to 6:</span></span>

<span data-ttu-id="af33a-129">`Trace` = 0, `Debug` = 1, `Information` = 2, `Warning` = 3, `Error` = 4, `Critical` = 5 및 `None` = 6</span><span class="sxs-lookup"><span data-stu-id="af33a-129">`Trace` = 0, `Debug` = 1, `Information` = 2, `Warning` = 3, `Error` = 4, `Critical` = 5, and `None` = 6.</span></span>

<span data-ttu-id="af33a-130">`LogLevel`을 지정하면 지정된 수준 이상의 메시지에 대해 로깅을 사용하도록 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-130">When a `LogLevel` is specified, logging is enabled for messages at the specified level and higher.</span></span> <span data-ttu-id="af33a-131">위의 JSON에서 `Default` 범주는 `Information` 이상에 대해 로그됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-131">In the preceding JSON, the `Default` category is logged for `Information` and higher.</span></span> <span data-ttu-id="af33a-132">예를 들어 `Information`, `Warning`, `Error` 및 `Critical` 메시지가 로그됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-132">For example, `Information`, `Warning`, `Error`, and `Critical` messages are logged.</span></span> <span data-ttu-id="af33a-133">`LogLevel` 지정하지 않으면 로깅은 `Information` 수준으로 기본 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-133">If no `LogLevel` is specified, logging defaults to the `Information` level.</span></span> <span data-ttu-id="af33a-134">자세한 내용은 [로그 수준](#log-level)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-134">For more information, see [Log levels](#log-level).</span></span>

<span data-ttu-id="af33a-135">공급자 속성에서 `LogLevel` 속성을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-135">A provider property can specify a `LogLevel` property.</span></span> <span data-ttu-id="af33a-136">공급자 아래의 `LogLevel`은 해당 공급자에 대해 로그할 수준을 지정하고 공급자 이외의 로그 설정을 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-136">`LogLevel` under a provider specifies levels to log for that provider, and overrides the non-provider log settings.</span></span> <span data-ttu-id="af33a-137">다음 *appsettings.json* 파일을 고려하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-137">Consider the following *appsettings.json* file:</span></span>

:::code language="json" source="snippets/configuration/worker-service/appsettings.Staging.json":::

<span data-ttu-id="af33a-138">`Logging.{ProviderName}.LogLevel`의 설정은 `Logging.LogLevel`의 설정을 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-138">Settings in `Logging.{ProviderName}.LogLevel` override settings in `Logging.LogLevel`.</span></span> <span data-ttu-id="af33a-139">위의 JSON에서는 `Debug` 공급자의 기본 로그 수준이 `Information`로 설정되었습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-139">In the preceding JSON, the `Debug` provider's default log level is set to `Information`:</span></span>

`Logging:Debug:LogLevel:Default:Information`

<span data-ttu-id="af33a-140">위 설정은 `Microsoft.Hosting`을 제외하고 모든 `Logging:Debug:` 범주에 대해 `Information` 로그 수준을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-140">The preceding setting specifies the `Information` log level for every `Logging:Debug:` category except `Microsoft.Hosting`.</span></span> <span data-ttu-id="af33a-141">특정 범주를 나열하면 특정 범주로 기본 범주가 재정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-141">When a specific category is listed, the specific category overrides the default category.</span></span> <span data-ttu-id="af33a-142">위의 JSON에서 `Logging:Debug:LogLevel` 범주 `"Microsoft.Hosting"` 및 `"Default"`는 `Logging:LogLevel`의 설정을 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-142">In the preceding JSON, the `Logging:Debug:LogLevel` categories `"Microsoft.Hosting"` and `"Default"` override the settings in `Logging:LogLevel`</span></span>

<span data-ttu-id="af33a-143">최소 로그 수준은 다음에 대해 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-143">The minimum log level can be specified for any of:</span></span>

- <span data-ttu-id="af33a-144">특정 공급자:  예를 들면 `Logging:EventSource:LogLevel:Default:Information`과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-144">Specific providers:  For example, `Logging:EventSource:LogLevel:Default:Information`</span></span>
- <span data-ttu-id="af33a-145">특정 범주: 예를 들면 `Logging:LogLevel:Microsoft:Warning`과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-145">Specific categories: For example, `Logging:LogLevel:Microsoft:Warning`</span></span>
- <span data-ttu-id="af33a-146">모든 공급자와 모든 범주: `Logging:LogLevel:Default:Warning`</span><span class="sxs-lookup"><span data-stu-id="af33a-146">All providers and all categories: `Logging:LogLevel:Default:Warning`</span></span>

<span data-ttu-id="af33a-147">최소 수준 이하의 모든 로그는 다음과 같이 ***되지 않습니다***.</span><span class="sxs-lookup"><span data-stu-id="af33a-147">Any logs below the minimum level are ***not***:</span></span>

- <span data-ttu-id="af33a-148">공급자에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-148">Passed to the provider.</span></span>
- <span data-ttu-id="af33a-149">로그되거나 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-149">Logged or displayed.</span></span>

<span data-ttu-id="af33a-150">모든 로그를 표시하지 않으려면 [LogLevel.None](xref:Microsoft.Extensions.Logging.LogLevel)을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-150">To suppress all logs, specify [LogLevel.None](xref:Microsoft.Extensions.Logging.LogLevel).</span></span> <span data-ttu-id="af33a-151">`LogLevel.None`의 값은 `LogLevel.Critical`(5)보다 높은 6입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-151">`LogLevel.None` has a value of 6, which is higher than `LogLevel.Critical` (5).</span></span>

<span data-ttu-id="af33a-152">공급자가 [로그 범위](#log-scopes)를 지원하는 경우 `IncludeScopes`는 사용 가능 여부를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-152">If a provider supports [log scopes](#log-scopes), `IncludeScopes` indicates whether they're enabled.</span></span> <span data-ttu-id="af33a-153">자세한 내용은 [로그 범위](#log-scopes)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-153">For more information, see [log scopes](#log-scopes)</span></span>

<span data-ttu-id="af33a-154">다음 *appsettings.json* 파일에는 모든 기본 제공 공급자에 대한 설정이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-154">The following *appsettings.json* file contains settings for all of the built-in providers:</span></span>

:::code language="json" source="snippets/configuration/worker-service/appsettings.Production.json":::

<span data-ttu-id="af33a-155">앞의 예제에서:</span><span class="sxs-lookup"><span data-stu-id="af33a-155">In the preceding sample:</span></span>

- <span data-ttu-id="af33a-156">범주 및 수준은 제안된 값이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-156">The categories and levels are not suggested values.</span></span> <span data-ttu-id="af33a-157">기본 공급자를 모두 표시하기 위해 제공되는 샘플입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-157">The sample is provided to show all the default providers.</span></span>
- <span data-ttu-id="af33a-158">`Logging.{ProviderName}.LogLevel`의 설정은 `Logging.LogLevel`의 설정을 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-158">Settings in `Logging.{ProviderName}.LogLevel` override settings in `Logging.LogLevel`.</span></span> <span data-ttu-id="af33a-159">예를 들어 `Debug.LogLevel.Default` 수준은 `LogLevel.Default`수준을 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-159">For example, the level in `Debug.LogLevel.Default` overrides the level in `LogLevel.Default`.</span></span>
- <span data-ttu-id="af33a-160">각 기본 공급자의 ‘별칭’을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-160">Each provider's *alias* is used.</span></span> <span data-ttu-id="af33a-161">각 공급자는 정규화된 형식 이름 대신 구성에서 사용할 수 있는 *별칭* 을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-161">Each provider defines an *alias* that can be used in configuration in place of the fully qualified type name.</span></span> <span data-ttu-id="af33a-162">기본 제공 공급자의 별칭은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-162">The built-in providers' aliases are:</span></span>
  - <span data-ttu-id="af33a-163">Console</span><span class="sxs-lookup"><span data-stu-id="af33a-163">Console</span></span>
  - <span data-ttu-id="af33a-164">Debug</span><span class="sxs-lookup"><span data-stu-id="af33a-164">Debug</span></span>
  - <span data-ttu-id="af33a-165">EventSource</span><span class="sxs-lookup"><span data-stu-id="af33a-165">EventSource</span></span>
  - <span data-ttu-id="af33a-166">EventLog</span><span class="sxs-lookup"><span data-stu-id="af33a-166">EventLog</span></span>
  - <span data-ttu-id="af33a-167">AzureAppServicesFile</span><span class="sxs-lookup"><span data-stu-id="af33a-167">AzureAppServicesFile</span></span>
  - <span data-ttu-id="af33a-168">AzureAppServicesBlob</span><span class="sxs-lookup"><span data-stu-id="af33a-168">AzureAppServicesBlob</span></span>
  - <span data-ttu-id="af33a-169">ApplicationInsights</span><span class="sxs-lookup"><span data-stu-id="af33a-169">ApplicationInsights</span></span>

### <a name="set-log-level-by-command-line-environment-variables-and-other-configuration"></a><span data-ttu-id="af33a-170">명령줄, 환경 변수 및 기타 구성으로 로그 수준 설정</span><span class="sxs-lookup"><span data-stu-id="af33a-170">Set log level by command line, environment variables, and other configuration</span></span>

<span data-ttu-id="af33a-171">로그 수준은 [구성 공급자](configuration-providers.md) 중 하나로 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-171">Log level can be set by any of the [configuration providers](configuration-providers.md).</span></span> <span data-ttu-id="af33a-172">예를 들어 값이 `Information`인 `Logging:LogLevel:Microsoft`라는 지속형 환경 변수를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-172">For example, you can create a persisted environment variable named `Logging:LogLevel:Microsoft` with a value of `Information`.</span></span>

## <a name="command-line"></a>[<span data-ttu-id="af33a-173">명령줄</span><span class="sxs-lookup"><span data-stu-id="af33a-173">Command Line</span></span>](#tab/command-line)

<span data-ttu-id="af33a-174">로그 수준 값이 지정되면 지속형 환경 변수를 만들고 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-174">Create and assign persisted environment variable, given the log level value.</span></span>

```CMD
:: Assigns the env var to the value
setx "Logging__LogLevel__Microsoft" "Information" /M
```

<span data-ttu-id="af33a-175">**명령 프롬프트** 의 ‘새’ 인스턴스에서 환경 변수를 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-175">In a *new* instance of the **Command Prompt**, read the environment variable.</span></span>

```CMD
:: Prints the env var value
echo %Logging__LogLevel__Microsoft%
```

## <a name="powershell"></a>[<span data-ttu-id="af33a-176">PowerShell</span><span class="sxs-lookup"><span data-stu-id="af33a-176">PowerShell</span></span>](#tab/powershell)

<span data-ttu-id="af33a-177">로그 수준 값이 지정되면 지속형 환경 변수를 만들고 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-177">Create and assign persisted environment variable, given the log level value.</span></span>

```powershell
# Assigns the env var to the value
[System.Environment]::SetEnvironmentVariable(
    "Logging__LogLevel__Microsoft", "Information", "Machine")
```

<span data-ttu-id="af33a-178">**PowerShell** 의 ‘새’ 인스턴스에서 환경 변수를 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-178">In a *new* instance of the **PowerShell**, read the environment variable.</span></span>

```powershell
# Prints the env var value
[System.Environment]::GetEnvironmentVariable(
    "Logging__LogLevel__Microsoft", "Machine")
```

## <a name="bash"></a>[<span data-ttu-id="af33a-179">Bash</span><span class="sxs-lookup"><span data-stu-id="af33a-179">Bash</span></span>](#tab/bash)

<span data-ttu-id="af33a-180">로그 수준 값이 지정되면 지속형 환경 변수를 만들고 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-180">Create and assign persisted environment variable, given the log level value.</span></span>

```Bash
# Assigns the env var to the value, persists it across sessions
echo export Logging__LogLevel__Microsoft="Information" >> ~/.bashrc && source ~/.bashrc
```

<span data-ttu-id="af33a-181">환경 변수를 읽는 방법.</span><span class="sxs-lookup"><span data-stu-id="af33a-181">To read the environment variable.</span></span>

```Bash
# Prints the env var value
echo $Logging__LogLevel__Microsoft

# Or use printenv:
# printenv Logging__LogLevel__Microsoft
```

> [!NOTE]
> <span data-ttu-id="af33a-182">`.`(마침표)를 포함하는 이름을 사용하여 환경 변수를 구성하는 경우 **Stack Exchange** 에 대한 "점(.)이 포함된 변수 내보내기" 질문 및 해당 [채택된 답변](https://unix.stackexchange.com/a/93533)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-182">When configuring environment variables with names that contain `.` (periods), consider the "Exporting a variable with a dot (.) in it" question on **Stack Exchange** and its corresponding [accepted answer](https://unix.stackexchange.com/a/93533).</span></span>

---

<span data-ttu-id="af33a-183">이전의 환경 설정은 환경에서 지속됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-183">The preceding environment setting is persisted in the environment.</span></span> <span data-ttu-id="af33a-184">.NET 작업자 서비스 템플릿을 사용하여 만든 앱을 사용할 때 설정을 테스트하려면 환경 변수가 할당된 후에 프로젝트 디렉터리에서 `dotnet run` 명령을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-184">To test the settings when using an app created with the .NET Worker service templates, use the `dotnet run` command in the project directory after the environment variable is assigned.</span></span>

```dotnetcli
dotnet run
```

> [!TIP]
> <span data-ttu-id="af33a-185">환경 변수를 설정한 후에는 IDE(통합 개발 환경)를 다시 시작하여 새로 추가된 환경 변수를 사용할 수 있는지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-185">After setting an environment variable, restart your integrated development environment (IDE) to ensure that newly added environment variables are available.</span></span>

<span data-ttu-id="af33a-186">[Azure App Service](https://azure.microsoft.com/services/app-service/)의 **설정 > 구성** 페이지에서 **새 애플리케이션 설정** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-186">On [Azure App Service](https://azure.microsoft.com/services/app-service/), select **New application setting** on the **Settings > Configuration** page.</span></span> <span data-ttu-id="af33a-187">Azure App Service 애플리케이션 설정은,</span><span class="sxs-lookup"><span data-stu-id="af33a-187">Azure App Service application settings are:</span></span>

- <span data-ttu-id="af33a-188">미사용 시 암호화되고 암호화된 채널을 통해 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-188">Encrypted at rest and transmitted over an encrypted channel.</span></span>
- <span data-ttu-id="af33a-189">환경 변수로 노출됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-189">Exposed as environment variables.</span></span>

<span data-ttu-id="af33a-190">환경 변수를 사용하여 .NET 구성 값을 설정하는 방법에 대한 자세한 내용은 [환경 변수](configuration-providers.md#environment-variable-configuration-provider)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-190">For more information on setting .NET configuration values using environment variables, see [environment variables](configuration-providers.md#environment-variable-configuration-provider).</span></span>

## <a name="how-filtering-rules-are-applied"></a><span data-ttu-id="af33a-191">필터링 규칙 적용 방식</span><span class="sxs-lookup"><span data-stu-id="af33a-191">How filtering rules are applied</span></span>

<span data-ttu-id="af33a-192"><xref:Microsoft.Extensions.Logging.ILogger%601> 개체를 만들 때 <xref:Microsoft.Extensions.Logging.ILoggerFactory> 개체는 공급자마다 해당 로거에 적용할 단일 규칙을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-192">When an <xref:Microsoft.Extensions.Logging.ILogger%601> object is created, the <xref:Microsoft.Extensions.Logging.ILoggerFactory> object selects a single rule per provider to apply to that logger.</span></span> <span data-ttu-id="af33a-193">`ILogger` 인스턴스에서 작성된 모든 메시지는 선택한 규칙에 따라 필터링됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-193">All messages written by an `ILogger` instance are filtered based on the selected rules.</span></span> <span data-ttu-id="af33a-194">사용 가능한 규칙 중에서 각 공급자 및 범주 쌍과 가장 관련이 많은 규칙이 선택됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-194">The most specific rule for each provider and category pair is selected from the available rules.</span></span>

<span data-ttu-id="af33a-195">지정된 범주에 대한 `ILogger`가 생성되면 다음 알고리즘이 각 공급자에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-195">The following algorithm is used for each provider when an `ILogger` is created for a given category:</span></span>

- <span data-ttu-id="af33a-196">공급자 또는 공급자의 별칭과 일치하는 모든 규칙을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-196">Select all rules that match the provider or its alias.</span></span> <span data-ttu-id="af33a-197">일치하는 규칙이 없는 경우 빈 공급자가 있는 모든 규칙을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-197">If no match is found, select all rules with an empty provider.</span></span>
- <span data-ttu-id="af33a-198">앞 단계의 결과에서 일치하는 범주 접두사가 가장 긴 규칙을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-198">From the result of the preceding step, select rules with longest matching category prefix.</span></span> <span data-ttu-id="af33a-199">일치하는 규칙이 없는 경우 범주를 지정하지 않는 규칙을 모두 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-199">If no match is found, select all rules that don't specify a category.</span></span>
- <span data-ttu-id="af33a-200">여러 규칙을 선택하는 경우 **마지막** 규칙을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-200">If multiple rules are selected, take the **last** one.</span></span>
- <span data-ttu-id="af33a-201">규칙을 선택하지 않은 경우 <xref:Microsoft.Extensions.Logging.LoggingBuilderExtensions.SetMinimumLevel(Microsoft.Extensions.Logging.ILoggingBuilder,Microsoft.Extensions.Logging.LogLevel)?displayProperty=nameWithType>를 사용하여 최소 로깅 수준을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-201">If no rules are selected, use <xref:Microsoft.Extensions.Logging.LoggingBuilderExtensions.SetMinimumLevel(Microsoft.Extensions.Logging.ILoggingBuilder,Microsoft.Extensions.Logging.LogLevel)?displayProperty=nameWithType> to specify the minimum logging level.</span></span>

## <a name="log-category"></a><span data-ttu-id="af33a-202">로그 범주</span><span class="sxs-lookup"><span data-stu-id="af33a-202">Log category</span></span>

<span data-ttu-id="af33a-203">`ILogger` 개체가 생성되면 ‘범주’가 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-203">When an `ILogger` object is created, a *category* is specified.</span></span> <span data-ttu-id="af33a-204">해당 범주는 `ILogger`의 해당 인스턴스에서 만든 각 로그 메시지에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-204">That category is included with each log message created by that instance of `ILogger`.</span></span> <span data-ttu-id="af33a-205">범주 문자열은 임의로 지정되지만 규칙은 클래스 이름을 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-205">The category string is arbitrary, but the convention is to use the class name.</span></span> <span data-ttu-id="af33a-206">예를 들어 서비스가 다음 개체와 같이 정의된 애플리케이션에서 범주는 `"Example.DefaultService"`일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-206">For example, in an application with a service define like the following object, the category might be `"Example.DefaultService"`:</span></span>

```csharp
namespace Example
{
    public class DefaultService : IService
    {
        private readonly ILogger<DefaultService> _logger;

        public DefaultService(ILogger<DefaultService> logger) =>
            _logger = logger;

        // ...
    }
}
```

<span data-ttu-id="af33a-207">범주를 명시적으로 지정하려면 <xref:Microsoft.Extensions.Logging.LoggerFactory.CreateLogger%2A?displayProperty=nameWithType>를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-207">To explicitly specify the category, call <xref:Microsoft.Extensions.Logging.LoggerFactory.CreateLogger%2A?displayProperty=nameWithType>:</span></span>

```csharp
namespace Example
{
    public class DefaultService : IService
    {
        private readonly ILogger _logger;

        public DefaultService(ILoggerFactory loggerFactory) =>
            _logger = loggerFactory.CreateLogger("CustomCategory");

        // ...
    }
}
```

<span data-ttu-id="af33a-208">고정 이름을 사용하여 `CreateLogger`를 호출하면 여러 클래스/형식에서 사용할 때 유용할 수 있으므로 이벤트를 범주별로 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-208">Calling `CreateLogger` with a fixed name can be useful when used in multiple classes/types so the events can be organized by category.</span></span>

<span data-ttu-id="af33a-209">`ILogger<T>`는 `T`의 정규화된 형식 이름으로 `CreateLogger`를 호출하는 것과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-209">`ILogger<T>` is equivalent to calling `CreateLogger` with the fully qualified type name of `T`.</span></span>

## <a name="log-level"></a><span data-ttu-id="af33a-210">로그 수준</span><span class="sxs-lookup"><span data-stu-id="af33a-210">Log level</span></span>

<span data-ttu-id="af33a-211">다음 표에서는 <xref:Microsoft.Extensions.Logging.LogLevel> 값, 편리한 `Log{LogLevel}` 확장 메서드 및 추천 사용법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-211">The following table lists the <xref:Microsoft.Extensions.Logging.LogLevel> values, the convenience `Log{LogLevel}` extension method, and the suggested usage:</span></span>

| <span data-ttu-id="af33a-212">LogLevel</span><span class="sxs-lookup"><span data-stu-id="af33a-212">LogLevel</span></span> | <span data-ttu-id="af33a-213">값</span><span class="sxs-lookup"><span data-stu-id="af33a-213">Value</span></span> | <span data-ttu-id="af33a-214">메서드</span><span class="sxs-lookup"><span data-stu-id="af33a-214">Method</span></span> | <span data-ttu-id="af33a-215">Description</span><span class="sxs-lookup"><span data-stu-id="af33a-215">Description</span></span> |
|--|--|--|--|
| [<span data-ttu-id="af33a-216">추적</span><span class="sxs-lookup"><span data-stu-id="af33a-216">Trace</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-217">0</span><span class="sxs-lookup"><span data-stu-id="af33a-217">0</span></span> | <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogTrace%2A> | <span data-ttu-id="af33a-218">가장 자세한 메시지를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-218">Contain the most detailed messages.</span></span> <span data-ttu-id="af33a-219">해당 메시지는 중요한 앱 데이터를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-219">These messages may contain sensitive app data.</span></span> <span data-ttu-id="af33a-220">해당 메시지는 기본적으로 사용하지 않도록 설정되며 프로덕션에서 사용하도록 설정하면 ***안 됩니다***.</span><span class="sxs-lookup"><span data-stu-id="af33a-220">These messages are disabled by default and should ***not*** be enabled in production.</span></span> |
| [<span data-ttu-id="af33a-221">디버그</span><span class="sxs-lookup"><span data-stu-id="af33a-221">Debug</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-222">1</span><span class="sxs-lookup"><span data-stu-id="af33a-222">1</span></span> | <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogDebug%2A> | <span data-ttu-id="af33a-223">디버깅 및 개발을 위한 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-223">For debugging and development.</span></span> <span data-ttu-id="af33a-224">너무 많으므로 프로덕션에서는 주의해서 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-224">Use with caution in production due to the high volume.</span></span> |
| [<span data-ttu-id="af33a-225">정보</span><span class="sxs-lookup"><span data-stu-id="af33a-225">Information</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-226">2</span><span class="sxs-lookup"><span data-stu-id="af33a-226">2</span></span> | <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogInformation%2A> | <span data-ttu-id="af33a-227">앱의 일반적인 흐름을 추적합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-227">Tracks the general flow of the app.</span></span> <span data-ttu-id="af33a-228">장기적인 값이 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-228">May have long-term value.</span></span> |
| [<span data-ttu-id="af33a-229">경고</span><span class="sxs-lookup"><span data-stu-id="af33a-229">Warning</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-230">3</span><span class="sxs-lookup"><span data-stu-id="af33a-230">3</span></span> | <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogWarning%2A> | <span data-ttu-id="af33a-231">비정상적이거나 예기치 않은 이벤트를 위한 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-231">For abnormal or unexpected events.</span></span> <span data-ttu-id="af33a-232">일반적으로 앱의 오류를 발생시키지 않는 오류 또는 조건을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-232">Typically includes errors or conditions that don't cause the app to fail.</span></span> |
| [<span data-ttu-id="af33a-233">오류</span><span class="sxs-lookup"><span data-stu-id="af33a-233">Error</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-234">4</span><span class="sxs-lookup"><span data-stu-id="af33a-234">4</span></span> | <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogError%2A> | <span data-ttu-id="af33a-235">처리할 수 없는 오류 및 예외를 위한 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-235">For errors and exceptions that cannot be handled.</span></span> <span data-ttu-id="af33a-236">해당 메시지는 전체 앱 오류가 아닌 현재 작업 또는 요청의 오류를 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-236">These messages indicate a failure in the current operation or request, not an app-wide failure.</span></span> |
| [<span data-ttu-id="af33a-237">심각</span><span class="sxs-lookup"><span data-stu-id="af33a-237">Critical</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-238">5</span><span class="sxs-lookup"><span data-stu-id="af33a-238">5</span></span> | <xref:Microsoft.Extensions.Logging.LoggerExtensions.LogCritical%2A> | <span data-ttu-id="af33a-239">즉각적인 대응이 필요한 오류를 위한 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-239">For failures that require immediate attention.</span></span> <span data-ttu-id="af33a-240">예: 데이터 손실 시나리오, 디스크 공간 부족.</span><span class="sxs-lookup"><span data-stu-id="af33a-240">Examples: data loss scenarios, out of disk space.</span></span> |
| [<span data-ttu-id="af33a-241">없음</span><span class="sxs-lookup"><span data-stu-id="af33a-241">None</span></span>](xref:Microsoft.Extensions.Logging.LogLevel) | <span data-ttu-id="af33a-242">6</span><span class="sxs-lookup"><span data-stu-id="af33a-242">6</span></span> |  | <span data-ttu-id="af33a-243">메시지를 기록하지 않도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-243">Specifies that no messages should be written.</span></span> |

<span data-ttu-id="af33a-244">위의 표에서는 `LogLevel`이 심각도가 낮은 것에서 높은 것 순으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-244">In the previous table, the `LogLevel` is listed from lowest to highest severity.</span></span>

<span data-ttu-id="af33a-245">[Log](xref:Microsoft.Extensions.Logging.LoggerExtensions) 메서드의 첫 번째 매개 변수인 <xref:Microsoft.Extensions.Logging.LogLevel>은 로그의 심각도를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-245">The [Log](xref:Microsoft.Extensions.Logging.LoggerExtensions) method's first parameter, <xref:Microsoft.Extensions.Logging.LogLevel>, indicates the severity of the log.</span></span> <span data-ttu-id="af33a-246">대부분의 개발자는 `Log(LogLevel, ...)` 대신 [Log{LogLevel}](xref:Microsoft.Extensions.Logging.LoggerExtensions) 확장 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-246">Rather than calling `Log(LogLevel, ...)`, most developers call the [Log{LogLevel}](xref:Microsoft.Extensions.Logging.LoggerExtensions) extension methods.</span></span> <span data-ttu-id="af33a-247">`Log{LogLevel}` 확장 메서드는 [Log 메서드를 호출하고 LogLevel을 지정](https://github.com/dotnet/extensions/blob/release/3.1/src/Logging/Logging.Abstractions/src/LoggerExtensions.cs)합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-247">The `Log{LogLevel}` extension methods [call the Log method and specify the LogLevel](https://github.com/dotnet/extensions/blob/release/3.1/src/Logging/Logging.Abstractions/src/LoggerExtensions.cs).</span></span> <span data-ttu-id="af33a-248">예를 들어 다음 두 로깅 호출은 기능이 동일하며 같은 로그를 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-248">For example, the following two logging calls are functionally equivalent and produce the same log:</span></span>

```csharp
public void LogDetails()
{
    var logMessage = "Details for log.";

    _logger.Log(LogLevel.Information, AppLogEvents.Details, logMessage);
    _logger.LogInformation(AppLogEvents.Details, logMessage);
}
```

<span data-ttu-id="af33a-249">`AppLogEvents.Details`는 이벤트 ID이며 상수 <xref:System.Int32> 값으로 암시적으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-249">`AppLogEvents.Details` is the event ID, and is implicitly represented by a constant <xref:System.Int32> value.</span></span> <span data-ttu-id="af33a-250">`AppLogEvents`는 여러 개의 명명된 식별자 상수를 노출하고 [로그 이벤트 ID](#log-event-id) 섹션에 표시되는 클래스입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-250">`AppLogEvents` is a class that exposes various named identifier constants and is displayed in the [Log event ID](#log-event-id) section.</span></span>

<span data-ttu-id="af33a-251">다음 코드는 `Information` 및 `Warning` 로그를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-251">The following code creates `Information` and `Warning` logs:</span></span>

```csharp
public async Task<T> GetAsync<T>(string id)
{
    _logger.LogInformation(AppLogEvents.Read, "Reading value for {Id}", id);

    var result = await _repository.GetAsync(id);
    if (result is null)
    {
        _logger.LogWarning(AppLogEvents.ReadNotFound, "GetAsync({Id}) not found", id);
    }

    return result;
}
```

<span data-ttu-id="af33a-252">위의 코드에서 첫 번째 `Log{LogLevel}` 매개 변수 `AppLogEvents.Read`은 [로그 이벤트 ID](#log-event-id)입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-252">In the preceding code, the first `Log{LogLevel}` parameter,`AppLogEvents.Read`, is the [Log event ID](#log-event-id).</span></span> <span data-ttu-id="af33a-253">두 번째 매개 변수는 나머지 메서드 매개 변수가 제공하는 인수 값에 대한 자리 표시자를 포함하고 있는 메시지 템플릿입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-253">The second parameter is a message template with placeholders for argument values provided by the remaining method parameters.</span></span> <span data-ttu-id="af33a-254">메서드 매개 변수는 이 문서의 뒷부분에 있는 [메시지 템플릿](#log-message-template) 섹션에 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-254">The method parameters are explained in the [message template](#log-message-template) section later in this article.</span></span>

<span data-ttu-id="af33a-255">적절한 로그 수준을 구성하고 올바른 `Log{LogLevel}` 메서드를 호출하여 특정 스토리지 매체에 기록되는 로그 출력의 크기를 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-255">Configure the appropriate log level and call the correct `Log{LogLevel}` methods to control how much log output is written to a particular storage medium.</span></span> <span data-ttu-id="af33a-256">예를 들어:</span><span class="sxs-lookup"><span data-stu-id="af33a-256">For example:</span></span>

- <span data-ttu-id="af33a-257">프로덕션:</span><span class="sxs-lookup"><span data-stu-id="af33a-257">In production:</span></span>
  - <span data-ttu-id="af33a-258">`Trace` 또는 `Information` 수준 로깅은 자세한 로그 메시지를 대량으로 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-258">Logging at the `Trace` or `Information` levels produces a high-volume of detailed log messages.</span></span> <span data-ttu-id="af33a-259">비용을 관리하고 데이터 스토리지 제한을 초과하지 않으려면 `Trace` 및 `Information` 수준 메시지를 대용량, 저비용 데이터 저장소에 로그합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-259">To control costs and not exceed data storage limits, log `Trace` and `Information` level messages to a high-volume, low-cost data store.</span></span> <span data-ttu-id="af33a-260">`Trace` 및 `Information`을 특정 범주로 제한하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-260">Consider limiting `Trace` and `Information` to specific categories.</span></span>
  - <span data-ttu-id="af33a-261">`Warning`~`Critical` 수준의 로깅은 적은 로그 메시지를 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-261">Logging at `Warning` through `Critical` levels should produce few log messages.</span></span>
    - <span data-ttu-id="af33a-262">비용과 스토리지 제한이 일반적으로 문제가 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-262">Costs and storage limits usually aren't a concern.</span></span>
    - <span data-ttu-id="af33a-263">로그가 적으므로 데이터 저장소를 더 유연하게 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-263">Few logs allow more flexibility in data store choices.</span></span>
- <span data-ttu-id="af33a-264">개발 중:</span><span class="sxs-lookup"><span data-stu-id="af33a-264">In development:</span></span>
  - <span data-ttu-id="af33a-265">`Warning`로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-265">Set to `Warning`.</span></span>
  - <span data-ttu-id="af33a-266">문제를 해결할 때는 `Trace` 또는 `Information` 메시지를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-266">Add `Trace` or `Information` messages when troubleshooting.</span></span> <span data-ttu-id="af33a-267">출력을 제한하려면 조사 중인 범주에 대해서만 `Trace` 또는 `Information`을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-267">To limit output, set `Trace` or `Information` only for the categories under investigation.</span></span>

<span data-ttu-id="af33a-268">다음 JSON에서는 `Logging:Console:LogLevel:Microsoft:Information`을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-268">The following JSON sets `Logging:Console:LogLevel:Microsoft:Information`:</span></span>

:::code language="json" source="snippets/configuration/worker-service/appsettings.MSFT.json":::

## <a name="log-event-id"></a><span data-ttu-id="af33a-269">로그 이벤트 ID</span><span class="sxs-lookup"><span data-stu-id="af33a-269">Log event ID</span></span>

<span data-ttu-id="af33a-270">각 로그에서 ‘이벤트 식별자’를 지정할 수 있으며, <xref:Microsoft.Extensions.Logging.EventId>는 `Id` 및 선택적 `Name` 읽기 전용 속성을 포함하는 구조체입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-270">Each log can specify an *event identifer*, the <xref:Microsoft.Extensions.Logging.EventId> is a structure with an `Id` and optional `Name` readonly properties.</span></span> <span data-ttu-id="af33a-271">샘플 소스 코드는 `AppLogEvents` 클래스를 사용하여 이벤트 ID를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-271">The sample source code uses the `AppLogEvents` class to define event IDs:</span></span>

```csharp
internal static class AppLogEvents
{
    internal const int Create = 1000;
    internal const int Read = 1001;
    internal const int Update = 1002;
    internal const int Delete = 1003;

    internal const int Details = 3000;
    internal const int Error = 3001;

    internal const int ReadNotFound = 4000;
    internal const int UpdateNotFound = 4001;

    // ...
}
```

<span data-ttu-id="af33a-272">이벤트 ID는 이벤트 집합을 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-272">An event ID associates a set of events.</span></span> <span data-ttu-id="af33a-273">예를 들어 리포지토리에서 값 읽기와 관련된 모든 로그는 `1001`일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-273">For example, all logs related to reading values from a repository might be `1001`.</span></span>

<span data-ttu-id="af33a-274">로깅 공급자는 이벤트 ID를 ID 필드에 기록하거나, 로그 메시지에 기록하거나, 전혀 기록하지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-274">The logging provider may log the event ID in an ID field, in the logging message, or not at all.</span></span> <span data-ttu-id="af33a-275">디버그 공급자는 이벤트 ID를 표시하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-275">The Debug provider doesn't show event IDs.</span></span> <span data-ttu-id="af33a-276">콘솔 공급자는 범주 뒤에 대괄호로 이벤트 ID를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-276">The console provider shows event IDs in brackets after the category:</span></span>

```console
info: Example.DefaultService.GetAsync[1001]
      Reading value for a1b2c3
warn: Example.DefaultService.GetAsync[4000]
      GetAsync(a1b2c3) not found
```

<span data-ttu-id="af33a-277">일부 로깅 공급자는 ID에 대한 필터링을 허용하는 필드에 이벤트 ID를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-277">Some logging providers store the event ID in a field, which allows for filtering on the ID.</span></span>

## <a name="log-message-template"></a><span data-ttu-id="af33a-278">로그 메시지 템플릿</span><span class="sxs-lookup"><span data-stu-id="af33a-278">Log message template</span></span>

<span data-ttu-id="af33a-279">각 로그 API는 메시지 템플릿을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-279">Each log API uses a message template.</span></span> <span data-ttu-id="af33a-280">메시지 템플릿에는 인수가 제공되는 자리 표시자를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-280">The message template can contain placeholders for which arguments are provided.</span></span> <span data-ttu-id="af33a-281">번호가 아닌 자리 표시자의 이름을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-281">Use names for the placeholders, not numbers.</span></span> <span data-ttu-id="af33a-282">값을 제공하는 데 사용되는 매개 변수를 결정하는 것은 자리 표시자의 이름이 아닌 순서입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-282">The order of placeholders, not their names, determines which parameters are used to provide their values.</span></span> <span data-ttu-id="af33a-283">다음 코드에서는 매개 변수 이름이 메시지 템플릿의 순서와 일치하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-283">In the following code, the parameter names are out of sequence in the message template:</span></span>

```csharp
string p1 = "param1";
string p2 = "param2";
_logger.LogInformation("Parameter values: {p2}, {p1}", p1, p2);
```

<span data-ttu-id="af33a-284">앞의 코드는 매개 변수 값을 순서대로 사용하여 로그 메시지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-284">The preceding code creates a log message with the parameter values in sequence:</span></span>

```text
Parameter values: param1, param2
```

<span data-ttu-id="af33a-285">해당 접근 방식을 통해 로깅 공급자는 [의미 체계 또는 구조적 로깅](https://github.com/NLog/NLog/wiki/How-to-use-structured-logging)를 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-285">This approach allows logging providers to implement [semantic or structured logging](https://github.com/NLog/NLog/wiki/How-to-use-structured-logging).</span></span> <span data-ttu-id="af33a-286">인수 자체는 서식이 지정된 메시지 템플릿뿐만 아니라 로깅 시스템에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-286">The arguments themselves are passed to the logging system, not just the formatted message template.</span></span> <span data-ttu-id="af33a-287">따라서 로깅 공급자는 매개 변수 값을 필드로 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-287">This enables logging providers to store the parameter values as fields.</span></span> <span data-ttu-id="af33a-288">다음 로거 메서드를 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-288">Consider the following logger method:</span></span>

```csharp
_logger.LogInformation("Getting item {Id} at {RunTime}", id, DateTime.Now);
```

<span data-ttu-id="af33a-289">Azure Table Storage에 로그할 경우를 예로 듭니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-289">For example, when logging to Azure Table Storage:</span></span>

- <span data-ttu-id="af33a-290">각 Azure Table 엔터티에는 `ID` 및 `RunTime` 속성이 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-290">Each Azure Table entity can have `ID` and `RunTime` properties.</span></span>
- <span data-ttu-id="af33a-291">속성이 있는 테이블은 로그된 데이터의 쿼리를 쉽게 합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-291">Tables with properties simplify queries on logged data.</span></span> <span data-ttu-id="af33a-292">예를 들어 문자 메시지의 시간 초과를 구문 분석하지 않고도 특정 `RunTime` 범위 내에 있는 모든 로그를 쿼리를 통해 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-292">For example, a query can find all logs within a particular `RunTime` range without having to parse the time out of the text message.</span></span>

## <a name="log-exceptions"></a><span data-ttu-id="af33a-293">예외 로그</span><span class="sxs-lookup"><span data-stu-id="af33a-293">Log exceptions</span></span>

<span data-ttu-id="af33a-294">로거 메서드에는 예외 매개 변수를 사용하는 오버로드가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-294">The logger methods have overloads that take an exception parameter:</span></span>

```csharp
public void Test(string id)
{
    try
    {
        if (id == "none")
        {
            throw new Exception("Default Id detected.");
        }
    }
    catch (Exception ex)
    {
        _logger.LogWarning(
            AppLogEvents.Error, ex,
            "Failed to process iteration: {Id}", id)
    }
}
```

<span data-ttu-id="af33a-295">예외 로깅은 공급자별로 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-295">Exception logging is provider-specific.</span></span>

### <a name="default-log-level"></a><span data-ttu-id="af33a-296">기본 로그 수준</span><span class="sxs-lookup"><span data-stu-id="af33a-296">Default log level</span></span>

<span data-ttu-id="af33a-297">기본 로그 수준을 설정하지 않으면 기본 로그 수준 값은 `Information`입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-297">If the default log level is not set, the default log level value is `Information`.</span></span>

<span data-ttu-id="af33a-298">예를 들어 다음 작업자 서비스 앱을 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-298">For example, consider the following worker service app:</span></span>

- <span data-ttu-id="af33a-299">.NET 작업자 템플릿을 사용하여 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-299">Created with the .NET Worker templates.</span></span>
- <span data-ttu-id="af33a-300">*appsettings.json* 및 *appsettings.Development.json* 을 삭제하거나 이름을 변경했습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-300">*appsettings.json* and *appsettings.Development.json* deleted or renamed.</span></span>

<span data-ttu-id="af33a-301">이전 설정을 사용하여 개인정보처리방침이나 홈페이지로 이동하면 범주 이름에 `Microsoft`가 포함된 `Trace`, `Debug`및 `Information` 메시지가 많이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-301">With the preceding setup, navigating to the privacy or home page produces many `Trace`, `Debug`, and `Information`  messages with `Microsoft` in the category name.</span></span>

<span data-ttu-id="af33a-302">다음 코드에서는 구성에 기본 로그 수준이 설정되어 있지 않은 경우 기본 로그 수준을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-302">The following code sets the default log level when the default log level is not set in configuration:</span></span>

```csharp
class Program
{
    static Task Main(string[] args) =>
        CreateHostBuilder(args).Build().RunAsync();

    static IHostBuilder CreateHostBuilder(string[] args) =>
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging => logging.SetMinimumLevel(LogLevel.Warning));
}
```

### <a name="filter-function"></a><span data-ttu-id="af33a-303">필터 함수</span><span class="sxs-lookup"><span data-stu-id="af33a-303">Filter function</span></span>

<span data-ttu-id="af33a-304">필터 함수는 구성 또는 코드를 통해 규칙이 할당되지 않은 모든 공급자와 범주에 대해 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-304">A filter function is invoked for all providers and categories that don't have rules assigned to them by configuration or code:</span></span>

```csharp
class Program
{
    static Task Main(string[] args) =>
        CreateHostBuilder(args).Build().RunAsync();

    static IHostBuilder CreateHostBuilder(string[] args) =>
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =>
                logging.AddFilter((provider, category, logLevel) =>
                {
                    return provider.Contains("ConsoleLoggerProvider")
                        && (category.Contains("Example") || category.Contains("Microsoft"))
                        && logLevel >= LogLevel.Information;
                }));
}
```

<span data-ttu-id="af33a-305">앞의 코드는 범주에 `Example` 또는 `Microsoft`가 포함되어 있고 로그 수준이 `Information` 이상인 경우 콘솔 로그를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-305">The preceding code displays console logs when the category contains `Example` or `Microsoft` and the log level is `Information` or higher.</span></span>

## <a name="log-scopes"></a><span data-ttu-id="af33a-306">로그 범위</span><span class="sxs-lookup"><span data-stu-id="af33a-306">Log scopes</span></span>

 <span data-ttu-id="af33a-307">*범위* 는 논리적 작업 집합을 그룹화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-307">A *scope* can group a set of logical operations.</span></span> <span data-ttu-id="af33a-308">이 그룹화는 집합의 일부로 생성된 각 로그에 동일한 데이터를 연결하는 데 사용될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-308">This grouping can be used to attach the same data to each log that's created as part of a set.</span></span> <span data-ttu-id="af33a-309">예를 들어 트랜잭션 처리의 일부로 생성되는 모든 로그에는 트랜잭션 ID가 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-309">For example, every log created as part of processing a transaction can include the transaction ID.</span></span>

<span data-ttu-id="af33a-310">범위:</span><span class="sxs-lookup"><span data-stu-id="af33a-310">A scope:</span></span>

- <span data-ttu-id="af33a-311"><xref:Microsoft.Extensions.Logging.ILogger.BeginScope%2A> 메서드에서 반환하는 <xref:System.IDisposable> 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-311">Is an <xref:System.IDisposable> type that's returned by the <xref:Microsoft.Extensions.Logging.ILogger.BeginScope%2A> method.</span></span>
- <span data-ttu-id="af33a-312">삭제될 때까지 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-312">Lasts until it's disposed.</span></span>

<span data-ttu-id="af33a-313">범위를 지원하는 공급자는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-313">The following providers support scopes:</span></span>

- `Console`
- [<span data-ttu-id="af33a-314">AzureAppServicesFile 및 AzureAppServicesBlob</span><span class="sxs-lookup"><span data-stu-id="af33a-314">AzureAppServicesFile and AzureAppServicesBlob</span></span>](xref:Microsoft.Extensions.Logging.AzureAppServices.BatchingLoggerOptions.IncludeScopes)

<span data-ttu-id="af33a-315">`using` 블록에 로거 호출을 래핑하여 범위를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-315">Use a scope by wrapping logger calls in a `using` block:</span></span>

```csharp
public async Task<T> GetAsync<T>(string id)
{
    T result;

    using (_logger.BeginScope("using block message"))
    {
        _logger.LogInformation(
            AppLogEvents.Read, "Reading value for {Id}", id);

        var result = await _repository.GetAsync(id);
        if (result is null)
        {
            _logger.LogWarning(
                AppLogEvents.ReadNotFound, "GetAsync({Id}) not found", id);
        }
    }

    return result;
}
```

<span data-ttu-id="af33a-316">다음 JSON은 콘솔 공급자에 대해 범위를 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-316">The following JSON enables scopes for the console provider:</span></span>

:::code language="json" source="snippets/configuration/worker-service/appsettings.IncludeScopes.json" highlight="9":::

<span data-ttu-id="af33a-317">다음은 콘솔 공급자에 대한 범위를 사용하도록 설정하는 코드입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-317">The following code enables scopes for the console provider:</span></span>

```csharp
class Program
{
    static Task Main(string[] args) =>
        CreateHostBuilder(args).Build().RunAsync();

    static IHostBuilder CreateHostBuilder(string[] args) =>
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging((_, logging) =>
                logging.ClearProviders()
                    .AddConsole(options => options.IncludeScopes = true));
}
```

## <a name="non-host-console-app"></a><span data-ttu-id="af33a-318">비호스트 콘솔 앱</span><span class="sxs-lookup"><span data-stu-id="af33a-318">Non-host console app</span></span>

<span data-ttu-id="af33a-319">[제네릭 호스트](generic-host.md)를 사용하지 않는 앱의 로깅 코드는 [공급자 추가](logging-providers.md#built-in-logging-providers) 및 [로거 생성](#create-logs) 방식에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-319">Logging code for apps without a [Generic Host](generic-host.md) differs in the way [providers are added](logging-providers.md#built-in-logging-providers) and [loggers are created](#create-logs).</span></span> <span data-ttu-id="af33a-320">비 호스트 콘솔 앱에서는 `LoggerFactory`를 만드는 동안 공급자의 `Add{provider name}` 확장 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-320">In a non-host console app, call the provider's `Add{provider name}` extension method while creating a `LoggerFactory`:</span></span>

```csharp
class Program
{
    static void Main(string[] args)
    {
        using var loggerFactory = LoggerFactory.Create(builder =>
        {
            builder
                .AddFilter("Microsoft", LogLevel.Warning)
                .AddFilter("System", LogLevel.Warning)
                .AddFilter("LoggingConsoleApp.Program", LogLevel.Debug)
                .AddConsole();
        });

        ILogger logger = loggerFactory.CreateLogger<Program>();
        logger.LogInformation("Example log message");
    }
}
```

<span data-ttu-id="af33a-321">`loggerFactory` 개체는 <xref:Microsoft.Extensions.Logging.ILogger> 인스턴스를 만드는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-321">The `loggerFactory` object is used to create an <xref:Microsoft.Extensions.Logging.ILogger> instance.</span></span>

## <a name="create-logs-in-main"></a><span data-ttu-id="af33a-322">Main에서 로그 만들기</span><span class="sxs-lookup"><span data-stu-id="af33a-322">Create logs in Main</span></span>

<span data-ttu-id="af33a-323">다음 코드는 호스트를 빌드한 후 DI에서 `ILogger` 인스턴스를 가져와 `Main`에 로그합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-323">The following code logs in `Main` by getting an `ILogger` instance from DI after building the host:</span></span>

```csharp
using System;
using System.Threading.Tasks;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;
using Microsoft.Extensions.Logging;

class Program
{
    static Task Main(string[] args)
    {
        IHost host = Host.CreateDefaultBuilder(args).Build();

        var logger = host.Services.GetRequiredService<ILogger<Program>>();
        logger.LogInformation("Host created.");

        return host.RunAsync();
    }
}
```

### <a name="no-asynchronous-logger-methods"></a><span data-ttu-id="af33a-324">비동기 로거 메서드 미지원</span><span class="sxs-lookup"><span data-stu-id="af33a-324">No asynchronous logger methods</span></span>

<span data-ttu-id="af33a-325">로깅은 매우 빨라서 비동기 코드의 성능 비용을 들일 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-325">Logging should be so fast that it isn't worth the performance cost of asynchronous code.</span></span> <span data-ttu-id="af33a-326">로깅 데이터 저장소가 느린 경우 직접 작성하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-326">If a logging data store is slow, don't write to it directly.</span></span> <span data-ttu-id="af33a-327">로그 메시지를 처음에 빠른 저장소에 작성한 다음, 나중에 느린 저장소로 이동하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-327">Consider writing the log messages to a fast store initially, then moving them to the slow store later.</span></span> <span data-ttu-id="af33a-328">예를 들어 SQL Server에 로그하는 경우 `Log` 메서드는 동기식이므로 `Log` 메서드에서 직접 로그하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="af33a-328">For example, when logging to SQL Server, don't do so directly in a `Log` method, since the `Log` methods are synchronous.</span></span> <span data-ttu-id="af33a-329">대신 동기적으로 로그 메시지를 메모리 내 큐에 추가하고 백그라운드 작업자가 큐에서 메시지를 풀하여 SQL Server에 대해 비동기 데이터 푸시 작업을 수행하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-329">Instead, synchronously add log messages to an in-memory queue and have a background worker pull the messages out of the queue to do the asynchronous work of pushing data to SQL Server.</span></span>

## <a name="change-log-levels-in-a-running-app"></a><span data-ttu-id="af33a-330">실행 중인 앱에서 로그 수준 변경</span><span class="sxs-lookup"><span data-stu-id="af33a-330">Change log levels in a running app</span></span>

<span data-ttu-id="af33a-331">로깅 API는 앱이 실행되는 동안 로그 수준을 변경하는 시나리오를 포함하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-331">The Logging API doesn't include a scenario to change log levels while an app is running.</span></span> <span data-ttu-id="af33a-332">그러나 일부 구성 공급자는 구성을 다시 로드할 수 있으며 이는 로깅 구성에 대한 즉각적인 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-332">However, some configuration providers are capable of reloading configuration, which takes immediate effect on logging configuration.</span></span> <span data-ttu-id="af33a-333">예를 들어 [파일 구성 공급자](configuration-providers.md#file-configuration-provider)는 기본적으로 로깅 구성을 다시 로드합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-333">For example, the [File Configuration Provider](configuration-providers.md#file-configuration-provider) reloads logging configuration by default.</span></span> <span data-ttu-id="af33a-334">앱이 실행되는 동안 코드에서 구성이 변경되면 앱 [IConfigurationRoot.Reload](xref:Microsoft.Extensions.Configuration.IConfigurationRoot.Reload%2A)를 호출하여 앱의 로깅 구성을 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-334">If configuration is changed in code while an app is running, the app can call [IConfigurationRoot.Reload](xref:Microsoft.Extensions.Configuration.IConfigurationRoot.Reload%2A) to update the app's logging configuration.</span></span>

## <a name="nuget-packages"></a><span data-ttu-id="af33a-335">NuGet 패키지</span><span class="sxs-lookup"><span data-stu-id="af33a-335">NuGet packages</span></span>

<span data-ttu-id="af33a-336"><xref:Microsoft.Extensions.Logging.ILogger%601> 및 <xref:Microsoft.Extensions.Logging.ILoggerFactory> 인터페이스와 구현은 .NET Core SDK에 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-336">The <xref:Microsoft.Extensions.Logging.ILogger%601> and <xref:Microsoft.Extensions.Logging.ILoggerFactory> interfaces and implementations are included in the .NET Core SDK.</span></span> <span data-ttu-id="af33a-337">또한 다음 NuGet 패키지에서도 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-337">They are also available in the following NuGet packages:</span></span>

- <span data-ttu-id="af33a-338">인터페이스는 [Microsoft.Extensions.Logging.Abstractions](https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions)에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-338">The interfaces are in [Microsoft.Extensions.Logging.Abstractions](https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions).</span></span>
- <span data-ttu-id="af33a-339">기본 구현은 [Microsoft.Extensions.Logging](https://www.nuget.org/packages/microsoft.extensions.logging)에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-339">The default implementations are in [Microsoft.Extensions.Logging](https://www.nuget.org/packages/microsoft.extensions.logging).</span></span>

## <a name="apply-log-filter-rules-in-code"></a><span data-ttu-id="af33a-340">코드에서 로그 필터 규칙 적용</span><span class="sxs-lookup"><span data-stu-id="af33a-340">Apply log filter rules in code</span></span>

<span data-ttu-id="af33a-341">로그 필터 규칙을 설정하는 기본 방법은 [구성](configuration.md)을 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-341">The preferred approach for setting log filter rules is by using [Configuration](configuration.md).</span></span>

<span data-ttu-id="af33a-342">다음 예제는 코드에서 필터 규칙을 등록하는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-342">The following example shows how to register filter rules in code:</span></span>

```csharp
class Program
{
    static Task Main(string[] args) =>
        CreateHostBuilder(args).Build().RunAsync();

    static IHostBuilder CreateHostBuilder(string[] args) =>
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =>
               logging.AddFilter("System", LogLevel.Debug)
                  .AddFilter<DebugLoggerProvider>("Microsoft", LogLevel.Information)
                  .AddFilter<ConsoleLoggerProvider>("Microsoft", LogLevel.Trace));
}
```

<span data-ttu-id="af33a-343">`logging.AddFilter("System", LogLevel.Debug)`는 `System`범주 및 로그 수준`Debug`을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-343">`logging.AddFilter("System", LogLevel.Debug)` specifies the `System` category and log level `Debug`.</span></span> <span data-ttu-id="af33a-344">특정 공급자를 구성하지 않았으므로 필터가 모든 공급자에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-344">The filter is applied to all providers because a specific provider was not configured.</span></span>

<span data-ttu-id="af33a-345">`AddFilter<DebugLoggerProvider>("Microsoft", LogLevel.Information)`은 다음을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-345">`AddFilter<DebugLoggerProvider>("Microsoft", LogLevel.Information)` specifies:</span></span>

- <span data-ttu-id="af33a-346">`Debug` 로깅 공급자</span><span class="sxs-lookup"><span data-stu-id="af33a-346">The `Debug` logging provider.</span></span>
- <span data-ttu-id="af33a-347">로그 수준 `Information` 이상</span><span class="sxs-lookup"><span data-stu-id="af33a-347">Log level `Information` and higher.</span></span>
- <span data-ttu-id="af33a-348">`"Microsoft"`로 시작하는 모든 범주</span><span class="sxs-lookup"><span data-stu-id="af33a-348">All categories starting with `"Microsoft"`.</span></span>

## <a name="see-also"></a><span data-ttu-id="af33a-349">참고 항목</span><span class="sxs-lookup"><span data-stu-id="af33a-349">See also</span></span>

- [<span data-ttu-id="af33a-350">.NET의 로깅 공급자</span><span class="sxs-lookup"><span data-stu-id="af33a-350">Logging providers in .NET</span></span>](logging-providers.md)
- [<span data-ttu-id="af33a-351">.NET에서 사용자 지정 로깅 공급자 구현</span><span class="sxs-lookup"><span data-stu-id="af33a-351">Implement a custom logging provider in .NET</span></span>](custom-logging-provider.md)
- [<span data-ttu-id="af33a-352">콘솔 로그 서식 지정</span><span class="sxs-lookup"><span data-stu-id="af33a-352">Console log formatting</span></span>](console-log-formatter.md)
- [<span data-ttu-id="af33a-353">.NET의 고성능 로깅</span><span class="sxs-lookup"><span data-stu-id="af33a-353">High-performance logging in .NET</span></span>](high-performance-logging.md)
- <span data-ttu-id="af33a-354">로깅 버그는 [github.com/dotnet/extensions](https://github.com/dotnet/extensions/issues) 리포지토리에서 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af33a-354">Logging bugs should be created in the [github.com/dotnet/extensions](https://github.com/dotnet/extensions/issues) repo</span></span>
